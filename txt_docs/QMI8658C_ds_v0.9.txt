          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                               QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                           QMI8658C DATASHEET
                                     JANUARY 10, 2022




                                                                          QST SOLUTIONS LIMITED
                                                               120 BAYTECH DR, SAN JOSE, CA 95134


© 2022 QST Corporation                    QMI8658C • Rev 0.9                                www. qstcorp.com
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     QMI8658C
     Low Noise, Wide Bandwidth 6D Inertial Measurement
     Unit with Motion Co-Processor and Sensor Fusion
     Features                                                         Description
     ▪    Low 15 mdps/√Hz gyroscope noise, low-latency,               The QMI8658C is a complete 6D MEMS inertial
          and wide bandwidth for performance applications             measurement unit (IMU) with 9-axis sensor fusion and
          such robotic vacuums, industrial tilt modules,              specified system level orientation accuracy. When using
          pedestrian navigation and GNSS augmentation, 5G             the QMI8658C in combination with the supplied XKF3
          antenna stabilization, inertial navigation, and large       9D-sensor fusion, the system features an accurate ±3°
          industrial UAVs                                             pitch and roll orientation, and a ±5°yaw/heading typical
                                                                      specification.
     ▪    Low Noise 200µg/√Hz accelerometer
     ▪    Host (slave) interface supports MIPI™ I3C, I2C, and         With tight board-level gyroscope sensitivity of ±3%,
          3-wire or 4-wire SPI                                        gyroscope noise density of 15 mdps/√Hz, and low
                                                                      latency, the QMI8658C is ideal for high performance
     ▪    Accelerometer and gyroscope sensors feature                 consumer and for industrial applications.
          signal processing paths with digitally programmable
          data rates and filtering                                    The QMI8658C incorporates a 3-axis gyroscope and a
                                                                      3-axis accelerometer. It provides a UI interface
     ▪    Complete inertial measurement unit (IMU) with               (supporting I3C, I2C and 3-wire or 4-wire SPI) .
          sensor fusion library with specified orientation
          accuracy of ±3ºpitch and roll, ±5ºyaw/heading               The QMI8658C incorporates an advanced vector digital
                                                                      signal processor (DSP) motion co-processor called the
     ▪    High-performance XKF3TM 6/9-axis sensor fusion              AttitudeEngine. The AttitudeEngine efficiently encodes
          with in-run calibration for correction of gyroscope         high frequency motion at high internal sampling rates,
          bias drift over-temperature and lifetime                    preserving full accuracy across lower-frequency output
     ▪    3-axis gyroscope and 3-axis accelerometer in a              data rates.
          small 2.5 x 3.0 x 0.86 mm 14-pin LGA package                This enables the application to utilize low output data
     ▪    Integrated Gen 2 AttitudeEngineTM motion co-                rates (ODRs) or on-demand (host polling) while still
          processor with vector DSP performs sensor fusion            acquiring accurate 3D motion data. The AttitudeEngine
          at 1 kHz sampling rate, while outputting data to host       reduces the data processing and interrupt load on a
          processor at a lower rate – improving accuracy              host processor with no compromises in 3D motion
          while reducing processor MIPS, power, and                   tracking accuracy. The result is very low total system
          interrupt requirements                                      power in combination with high accuracy, which are
                                                                      essential to many portable and battery powered
     ▪    Large 1536-byte FIFO can be used to buffer sensor           applications.
          data to lower system power dissipation
     ▪    Motion on demand technology for polling-based               Applications
          synchronization
     ▪    Large sensor dynamic ranges from ±16°/s to
                                                                      ▪    Toys
          ±2048°/s for gyroscope and ±2 g to ±16 g for                ▪    Drones
          accelerometer
                                                                      ▪    E-bikes and scooters
     ▪    Low power modes for effective power management
                                                                      ▪    Motion-based remote controls and air mice
     ▪    Digitally programmable sampling rate and filters
     ▪    Embedded temperature sensor
     ▪    Wide extended operating temperature range
          (-40°C to 85°C)




© 2022 QST Corporation                                          QMI8658C • Rev 0.9                                 www. qstcorp.com
                                                                                                                                  1
           ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                                                QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                                               Table of Contents
     1      General Information ...................................................................................................... 4
         1.1        Ordering Information .........................................................................................................4
         1.2        Marking Information ..........................................................................................................4
         1.3        Internal Block Diagram .......................................................................................................5
         1.4        Interface Operating Modes ................................................................................................6
         1.5        Application Diagrams .........................................................................................................7
         1.6        Package & Pin Information .................................................................................................9
         1.7        Recommended External Components ............................................................................... 11
     2      QMI8658C Architecture ................................................................................................ 12
         2.1        AttitudeEngine Mode Overview ....................................................................................... 12
         2.2        Advantages of the Attitude Engine Approach .................................................................... 12
         2.3        9D Sensor Fusion and Auto-Calibration using XKF3 ........................................................... 13
         2.4        Frames of Reference and Conventions for Using QMI8658C .............................................. 14
     3      System, Electrical and Electro-Mechanical Characteristics............................................. 15
         3.1     Absolute Maximum Ratings ............................................................................................. 15
         3.2     Recommended Operating Conditions ............................................................................... 15
         3.3     System Level Specifications .............................................................................................. 16
         3.4     Electro-Mechanical Specifications..................................................................................... 17
         3.5     Accelerometer Programmable Characteristics................................................................... 19
         3.6     Gyroscope Programmable Characteristics ......................................................................... 21
         3.7     Electrical Characteristics................................................................................................... 22
            3.7.1 Current Consumption ............................................................................................................ 22
         3.8     Temperature Sensor ........................................................................................................ 24
     4      Register Map Overview ................................................................................................ 25
         4.1        UI Register Map Overview ................................................................................................ 25
     5      UI Sensor Configuration Settings and Output Data........................................................ 28
         5.1     Typical Sensor Mode Configuration and Output Data ........................................................ 28
         5.2     AttitudeEngine (AE) Mode Configuration and Output Data ................................................ 29
         5.3     General Purpose Register ................................................................................................. 29
         5.4     Configuration Registers .................................................................................................... 30
         5.5     FIFO Registers .................................................................................................................. 34
         5.6     Status and Time Stamp Registers ...................................................................................... 35
         5.7     Sensor Data Output Registers ........................................................................................... 37
         5.8     Reset register................................................................................................................... 40
         5.9     CTRL 9 Functionality (Executing Pre-defined Commands) .................................................. 40
            5.9.1 CTRL 9 Description ................................................................................................................ 40
            5.9.2 WCtrl9 (Write – CTRL9 Protocol)........................................................................................... 40
            5.9.3 Ctrl9R (CTRL9 Protocol - Read) .............................................................................................. 41
            5.9.4 Ctrl9 (CTRL9 Protocol Acknowledge) .................................................................................... 41
            5.9.5 CTRL9 Commands in Detail ................................................................................................... 42
     6      Interrupts .................................................................................................................... 44
         6.1     Overview ......................................................................................................................... 44
            6.1.1 Interrupt 1 (INT1) .................................................................................................................. 44
            6.1.2 Interrupt 2 (INT2) .................................................................................................................. 44
     7      Operating Modes ......................................................................................................... 45
© 2022 QST Corporation                                                    QMI8658C • Rev 0.9                                                 www. qstcorp.com
                                                                                                                                                            2
           ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                                            QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
         7.1       General Mode Transitioning ............................................................................................. 48
         7.2       Transition Times .............................................................................................................. 48
     8      FIFO Description........................................................................................................... 49
         8.1       Using the FIFO ................................................................................................................. 49
         8.2       FIFO Register Description ................................................................................................. 50
     9      Wake on Motion (WoM) .............................................................................................. 51
         9.1       Wake on Motion Introduction .......................................................................................... 51
         9.2       Accelerometer Configuration ........................................................................................... 51
         9.3       Wake on Motion Event .................................................................................................... 51
         9.4       Configuration Procedure .................................................................................................. 51
         9.5       Wake on Motion Control Registers ................................................................................... 52
         9.6       Exiting Wake on Motion Mode ......................................................................................... 52
     10 Locking Mechanism ...................................................................................................... 53
         10.1      Set Locking Mechanism .................................................................................................... 53
         10.2      Reading sensor data ......................................................................................................... 53
         10.3      Data_Read_Delay ............................................................................................................ 53
         10.4      On-The-Fly ODR changing ................................................................................................. 54
     11 Performing Device Self Test .......................................................................................... 55
         11.1      Accelerometer Self Test ................................................................................................... 55
         11.2      Gyroscope Self Test .......................................................................................................... 55
     12 Host Serial Interface ..................................................................................................... 56
         12.1 Serial Peripheral Interface (SPI) ........................................................................................ 56
           12.1.1   SPI Timing Characteristics ................................................................................................. 61
         12.2 I2C Interface ..................................................................................................................... 63
         12.3 MIPI I3C Interface ............................................................................................................ 64
     13 Package and Handling .................................................................................................. 65
         13.1      Package Drawing ............................................................................................................. 65
         13.2      Reflow Specification......................................................................................................... 66
         13.3      Storage Specifications ...................................................................................................... 66
     14 Document Information................................................................................................. 67
         14.1      Revision History ............................................................................................................... 67




© 2022 QST Corporation                                                  QMI8658C • Rev 0.9                                               www. qstcorp.com
                                                                                                                                                        3
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                         QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     1 General Information
       1.1       Ordering Information
     Table 1.     Ordering Information

                 Part Number                          Package                           Packing Method
                   QMI8658C                             LGA14                              Tape & Reel


       1.2       Marking Information

             ROW         EXAMPLE    CODE/EXPLANATION

             1            8658 C    DDDD D – Device code
             2            0113      YWLL – Y (Year code), W (1-digit, biweekly code), LL (Lot indication)
             3           ● DA       CR – C (Assembly location), R (Product revision)



                                               Figure 1. Top Mark




© 2022 QST Corporation                                QMI8658C • Rev 0.9                              www. qstcorp.com
                                                                                                                     4
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                               QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       1.3     Internal Block Diagram




                                  Figure 2.   Internal Block Diagram




© 2022 QST Corporation                           QMI8658C • Rev 0.9         www. qstcorp.com
                                                                                           5
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       1.4     Interface Operating Modes
     The QMI8658C can operate in below mode, as shown in the Figure below.
     Default mode of operation. In this mode, the QMI8658C is a slave device to a host processor that communicates to it
     using one of the following interfaces: I2C, I3C, and SPI (3-wire or 4-wire modes). This slave relationship to the host is
     the same for all operating modes. In Mode 1, the secondary interface is not enabled.




                                                       Figure 3.     Operating modes




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                  6
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                           QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       1.5     Application Diagrams
     The typical application diagrams are shown in this section.




                                                     Figure 4.     4-Wire SPI-UI mode




                                                     Figure 5.     3-Wire SPI-UI mode




© 2022 QST Corporation                                      QMI8658C • Rev 0.9          www. qstcorp.com
                                                                                                       7
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                                        Figure 6.     I3C/I2C-UI mode
     Note: As there is internal 200Kohm pull-up resistor, pull SDO/SA0 low will cost more current then pull it high.




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                  8
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       1.6     Package & Pin Information
     The pinout of the QMI8658C is shown in the figure below. The pin names and functionality are detailed in the table
     that follows. The pin functionality is dictated by the part’s operating mode, as described in the section above.




                Figure 7. Pins Face Down (Top View)              Figure 8. Pins Face Up (Bottom View)




© 2022 QST Corporation                                    QMI8658C • Rev 0.9                                 www. qstcorp.com
                                                                                                                            9
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                    QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 2.        Pin Definitions

     Pin         Type       Pin Name        Mode 1 Function (Default Mode 2 Function (External Sensor
     Number                                 Mode)                    Mode)

     1           O          SDO/SA0(1)(3)   SPI-UI Data Out (SDO) in SPI-UI 4-Wire Mode.
                                            I2C Slave LSB bit of the device Address (SA0)

     2           IO         SDx(1)(2)       Connect to VDDIO or GND           I2C Master Serial Data (MSDA)

     3           IO         SCx(1)(2)       Connect to VDDIO or GND           I2C Master Serial Clock (MSCL)

     4           O          INT1            Programmable Interrupt 1 for I2C and SPI

     5           I          VDDIO           Power Supply for IO Pins

     6           I          GND             Ground (0 V supply); is internally No Connect.

     7           I          GND             Ground (0 V supply)

     8           I          VDD             Power supply

     9           O          INT2            Programmable Interrupt 2 Programmable Interrupt 2 (INT2) /
                                            (INT2)/ Data Enable (DEN) Data Enable (DEN).
                                                                              I2C Master external Synchronization
                                                                              Signal (MDRDY)

     10          IO         RESV-NC(1)(2)   Reserved. No Connect

     11          I          RESV-NC         Reserved. No Connect

     12          I          CS(1)(2)        I2C/ I3C /SPI-UI selection Pin.
                                            (If 1: I2C-UI Mode: I2C/I3C communication enabled, SPI idle mode)
                                            (If 0: SPI-UI mode: I2C/I3C disabled)

     13          IO         SCL(1)(2)       SPI-UI Serial Clock (SPC) (3)

     14          IO         SDA(1)(2)       I2C/I3C-UI Data (SDA)
                                            SPI-UI Data In (SDI) (3) in 4 wire Mode
                                            SPI-UI Data IO (SDIO) (3) in 3 Wire Mode



     Notes:
     1. This pin has an internal 200K pull up resistor.
     2. The internal pull-up resistor can be disabled by CTRL9 command (CTRL_CMD_SET_RPU). Refer to 5.9.5 for
         details.
     3. Refer to Section 12 for detailed configuration information.




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                 www. qstcorp.com
                                                                                                                               10
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       1.7      Recommended External Components
     Table 3.     Recommended External Components

             Component                    Description                    Parameter                       Typical
                  Cp1                       Capacitor                    Capacitance                     100 nF
                  Cp2                       Capacitor                    Capacitance                     100 nF
                 Rpu   (4)                  Resistor                      Resistance                  2K  10 k
     Note:
     4. Rpu resistors are only needed when the Host Serial Interface is configured for I2C (see I2C Interface section).
         They are not needed when the Host Serial Interface is configured for SPI or I3C. If pull-up resistors are used on
         SCL and SDA, then SPI, I3C and I2C Modes are all possible. If a pull-down resistor is used on SA0, an alternate
         slave address is used for I2C. SPI and I3C modes will be unaltered with the use of pull-up resistors for I2C.
         Additionally, a suitable pull up resistance (Rpu) value should be selected, accounting for the tradeoff between
         current consumption and rise time.




                                               Figure 9.     Typical Electrical Connections




© 2022 QST Corporation                                      QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                 11
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                        QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
         2 QMI8658C Architecture
     QMI8658C is a smart sensor that combines a high-              ▪    Motion Encoder: The on-chip motion encoder
     performance IMU with a powerful Single Instruction                 performs 32-bit high-speed dead reckoning
     Multiple Data (SIMD) based Vector DSP motion co-                   calculations at 1 kHz data rates allowing accurate
     processor referred to as the AttitudeEngine™ (AE).                 capture of high frequency and coning effects.
                                                                        Orientation and velocity increments are calculated
     Included sensor fusion software (XKF3) allows the
                                                                        with full coning and sculling compensation and the
     device to achieve orientation accuracies of ±3ºfor pitch
                                                                        magnetic field vector from the external
     and roll and ±5ºfor yaw/heading.
                                                                        magnetometer is rotated to the sensor frame of
     The QMI8658C includes a microcontroller for data                   reference. This allows the lossless encoding
     scheduling, combined with Direct Memory Access                     (compression) of 6D motion to a low output data
     (DMA) in order to allow efficient data shuttling on the            rate, while maintaining the accuracy provided by
     chip. Multi-channel data is easily processed at rates up           the 1 kHz input and data processing rate. Motion
     to 1 kHz.                                                          data encoded by the AttitudeEngine is available at
                                                                        a user programmable data rate (1 Hz to 64 Hz).
     An internal block diagram is shown in Figure 2. The                The orientation and velocity increments from the
     MEMS elements are amplified and converted by  A/D                AttitudeEngine are suitable for any 3D motion
     converters, which are synchronized to a common clock               tracking application (orientation, velocity, and
     so that all the motion measurements of acceleration,               position) and may be further fused by the user with
     angular rate and magnetic heading are sampled at the               information from other sources such as a GNSS
     same time minimizing any skew between channels. The                receiver or barometer in an optimal estimator.
     data is then sent to a signal processing chain that
     accomplishes decimation, filtering, and calibration.          ▪    Motion on Demand (MoD): The QMI8658C allows
                                                                        the host to access encoded motion data
     Once the data has been processed, it can be sent to the            asynchronously (polling) and on demand. The
     host processor depending on additional configuration               motion data in the AttitudeEngine (AE) mode
     settings, such as enabling the FIFO or using the                   remains accurate even at very low output data
     AttitudeEngine.                                                    rates. This allows easy integration and
                                                                        synchronization with other sensors for state-of-the-
         2.1   AttitudeEngine Mode Overview                             art applications such as rolling shutter camera
                                                                        stabilization, optical sensors software de-blurring,
     Brief descriptions of the major functions of the                   GNSS integration and augmented or virtual reality.
     AttitudeEngine are discussed below. Note that the
     AttitudeEngine may be enabled or disabled and
     configured using the CTRL6 register.
                                                                       2.2   Advantages of the Attitude
                                                                             Engine Approach
     ▪    Calibration: The QMI8658C applies continuous on-
          chip calibration of all the sensors (accelerometer,      The advantages of the AttitudeEngine (AE) approach
          gyroscope, and magnetometer) including scale,            over the traditional sensor approach are briefly
          offset, and temperature calibration. When used in        discussed below.
          conjunction with a sensor fusion filter (such as the
          XKF3) running on the host processor, estimated           ▪    Low-Power Architecture: Dead reckoning
          sensor errors can be updated in-use, allowing                 calculations are performed with the AE vector DSP
          sensor calibration to be performed in the                     that is designed to perform essential calculations
          background without any host intervention. This                while achieving high accuracy and low power
          offloads computationally expensive per-sample re-             simultaneously. The AE approach enables a typical
          calibration from the host processor to the                    interrupt rate reduction to the host processor of 10x
          QMI8658C                                                      and can be up to 100x for some applications. This
                                                                        significantly enhances the operational life of battery
     ▪    Sample Synchronization: The QMI8658C                          powered devices without any compromises in 3D
          automatically provides highly synchronous output              motion tracking accuracy.
          between the various IMU accelerometer and
          gyroscope channels by using fully parallel ΣΔ-           ▪    High Performance: The motion encoder and
          converters. The QMI8658C also provides time                   sample synchronizer enable highly accurate strap
          synchronization of data between the IMU and the               down integration that can be fully compensated for
          external magnetometer.                                        coning and sculling artifacts.




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                     www. qstcorp.com
                                                                                                                                   12
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       2.3     9D Sensor Fusion and Auto-                            XKF3 Features:
               Calibration using XKF3                           ▪    Continuous Sensor Auto Calibration, No User
                                                                     Interaction Required
     XKF3 is a sensor fusion algorithm, based on Extended
     Kalman Filter theory that fuses 3D inertial sensor data    ▪    High Accuracy, Real-Time, Low-Latency Optimal
     (orientation and velocity increments) and 3D                    estimate of 3D Orientation, up to 1 kHz output data
     magnetometer, also known as ‘9D’, data to optimally             rate
     estimate 3D orientation with respect to an Earth fixed     ▪    Ultra-low system power for 3D Orientation enabled
     frame.                                                          by AttitudeEngine between 1 to 64 Hz output data
     A license to use XKF3 in a CMSIS compliant library              rate without any degradation in accuracy
     form for Cortex M0+, M3, M4, M4F, for commercial           ▪    Best-in-Class Immunity to Magnetic Distortions
     purposes is provided with certain QST evaluation kits
     incorporating the QMI8658C.                                ▪    Best-in-Class Immunity to Transient Accelerations

     A restricted-use license for use of XKF3 for commercial    ▪    Flexible use Scenarios, North Referenced,
     purposes is also granted for certain applications when          Unreferenced
     XKF3 is used with the QMI8xxx series of IMUs, such as      ▪    Extensive Status Reporting for Smooth Integration
     the QMI8658C/C family and the QMI8610.                          in Applications
                                                                ▪    Optimized Library for Popular Microcontrollers




© 2022 QST Corporation                                    QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                              13
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                  QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                    Figure 10. Chip Orientation Coordinate System


       2.4     Frames of Reference and                             Y-Z coordinate system shown above. Increasing
                                                                   accelerations along the positive X-Y-Z axes are
               Conventions for Using                               considered positive. Angular Rate (x, y, z) in the
               QMI8658C                                            counterclockwise direction around the respective axis
                                                                   are considered positive.
     The QMI8658C uses a right-handed coordinate system
     as the basis for the sensor frame of reference.               Figure 10 shows the various frames of reference and
     Acceleration (ax, ay, az) are given with respect to the X-    conventions for using the QMI8658C.




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                               www. qstcorp.com
                                                                                                                             14
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                       QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       3 System, Electrical and Electro-Mechanical
         Characteristics
       3.1       Absolute Maximum Ratings
     Stresses exceeding the absolute maximum ratings may damage the device. The device may not function or be
     operable above the recommended operating conditions. Stressing the parts to these levels is not recommended. In
     addition, extended exposure to stresses above the recommended operating conditions may affect device reliability.
     The absolute maximum ratings are stress ratings only.
     Table 4.     Absolute Maximum Ratings

      Symbol                                    Parameter                                  Min.            Max.        Unit
         TSTG      Storage Temperature                                                      -40            +125         °C
        TPmax      Lead Soldering Temperature, 10 Seconds                                                  +260         °C
         VDD       Supply Voltage                                                           -0.3           3.6           V
       VDDIO       I/O Pins Supply Voltage                                                  -0.3           3.6           V
         Sg(5)     Acceleration g for 0.2 ms (Un-powered)                                                 10,000         g
                   Electrostatic Discharge   Human Body Model per JES001-2014                      ±2000
        ESD(6)                                                                                                           V
                   Protection Level          Charged Device Model per JESD22-C101                  ±500
     Notes:
     5. This is a mechanical shock (g) sensitive device. Proper handling is required to prevent damage to the part.
     6. This is an ESD-sensitive device. Proper handling is required to prevent damage to the part.

       3.2       Recommended Operating Conditions
     The Recommended Operating Conditions table defines the conditions for device operation. Recommended operating
     conditions are specified to ensure optimal performance. QST does not recommend exceeding them or designing to
     Absolute Maximum Ratings.
     Table 5.     Recommended Operating Conditions

     Symbol                            Parameter                                 Min       Typ             Max          Unit

        VDD       Supply Voltage                                                 1.71       1.8             3.6           V
      VDDIO       I/O Pins Supply Voltage                                        1.71       1.8             3.6           V
        Tr(7)     VDDIO rising time (from 0.1V to 1.7V)                                                     100           us
         VIL      Digital Low Level Input Voltage                                                     0.3 *VDDIO          V
         VIH      Digital High Level Input Voltage                         0.7 *VDDIO                VDDIO + 0.3          V
        VOL       Digital Low Level Output Voltage                                                    0.1 *VDDIO          V
        VOH       Digital High Level Output Voltage                        0.9 *VDDIO                                     V


     Notes:
     7. There is no rising time limitation for VDD.




© 2022 QST Corporation                                      QMI8658C • Rev 0.9                                     www. qstcorp.com
                                                                                                                                  15
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       3.3      System Level Specifications                         performance specifications assume that good
                                                                    engineering practices for the placement conditions of
     System level specifications are provided to give               the QMI8658C and 3D magnetometer are considered.
     guidance on the system performance in a                        For example, do not place the QMI8658C where strong
     recommended       and    typical configuration.    The         vibrations may occur or could be amplified; do not place
     recommended system configuration is the QMI8658C               the 3D magnetometer where magnetic fields other than
     and optionally a supported 3D magnetometer used with           the Earth magnetic field may be measured. Typical
     a supported host processor, running the XKF3 9D-               numbers are provided below unless otherwise noted.
     sensor fusion and having executed and stored the result
     of the “Board Level Calibration” routine. The system


     Table 6.     System Level 3D Orientation Accuracy Specifications

        Subsystem                Parameter               Typical         Unit                   Comments
                                                                                 Requires use of XKF3 software library on
                         Roll                                  ±3         deg
                                                                                 host processor.
                                                                                 Requires use of XKF3 software library on
                         Pitch                                 ±3         deg
                                                                                 host processor.
                                                                                 Requires use of XKF3 software library on
     QMI8658C+XKF3       Yaw (Heading)
                                                               ±5         deg    host processor, using magnetometer, in a
     Quaternion          Referenced to North
                                                                                 homogenous Earth magnetic field.
                                                                                 From Allan Variance bias instability.
                                                                                 Does not require a magnetometer.
                         Yaw (Heading) Unreferenced        5-25          deg/h   (See specification above for use with
                                                                                 magnetometer.)
                                                                                 Fully immune to magnetic distortions.
                                                                                 To benefit from the power saving using
     QMI8658C+XKF3
                         Output Data Rate                 1-1000          Hz     the AttitudeEngine, use a max ODR of
     Quaternion
                                                                                 64 Hz.




© 2022 QST Corporation                                    QMI8658C • Rev 0.9                                      www. qstcorp.com
                                                                                                                                 16
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                        QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       3.4      Electro-Mechanical Specifications
     VDD = VDDIO = 1.8 V, T = 25°C unless otherwise noted.
     Table 7.     Accelerometer Electro-Mechanical Specifications

      Subsystem                  Parameter                       Typical                  Unit             Comments
                         Noise Density (@ 32Hz)                     150                  g/√Hz    High-Resolution Mode
                                                         Scale Setting     Sensitivity
                                                             ±2 g           16,384
                         Sensitivity Scale Factor            ±4 g            8,192       LSB/g     16-Bit Output
                                                             ±8 g            4,096
                                                            ±16 g            2,048
                         Cross-Axis Sensitivity                      ±1                    %

                   Temperature Coefficient of                                                      Over-Temperature Range of
                                                                     ±1                  mg/°C     -40°C to 85°C, at Board
     Accelerometer Offset (TCO)
                                                                                                   Level
                         Temperature Coefficient of
                                                                    ±0.04                 %/°C
                         Sensitivity (TCS)
                         Initial Offset Tolerance                   ±100                   mg      Board Level
                         Initial Sensitivity Tolerance               ±6                    %       Board Level
                         Non-Linearity                              ±0.75                  %       Best Fit Line
                                                                                     3.4.1.1.1.1   From Software Reset, No
                                                                                                   Power, or Power Down to
                         System Turn On Time(8)                     150                    ms
                                                                                                   Power-on Default state = t0
                                                                                                   in Figure 11
                                                                                     3.4.1.1.1.2   Accel Turn on from Power-
                                                                                                   On Default state or from Low
                         Accel Turn On Time                   3 ms + 3/ODR                 ms
                                                                                                   Power state = t2 + t5 in
                                                                                                   Figure 11.

     Note:
     8. System Turn On Time starts once VDDIO and VDD are within 1% of Final Value.




© 2022 QST Corporation                                        QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                   17
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                                       QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 8.     Gyroscope Electro-Mechanical Specifications

      Subsystem                    Parameter                          Typical                      Unit                Comments
                                                               Scale
                                                                               Sensitivity
                                                               Setting
                                                               ±16 dps           2048
                                                               ±32 dps           1024
                                                               ±64 dps            512
                           Sensitivity                                                           LSB/dps       16-Bit Output
                                                              ±128 dps            256
                                                              ±256 dps            128
                                                              ±512 dps             64
                                                              ±1024 dps            32
                                                              ±2048 dps            16
                           Natural Frequency                             23.5                      kHz
                           Noise Density (@ 32Hz)                         15                    mdps/√Hz       High-Resolution Mode

       Gyroscope           Non-Linearity                                 ±0.2                       %
                           Cross-Axis Sensitivity                         ±2                        %
                           g-Sensitivity                                 ±0.1                      dps/g
                                                                                                               From Software Reset, No
                                                                                                               Power, or Power Down to
                           System Turn On Time(9)                        150                        ms
                                                                                                               Power-on Default state
                                                                                                               = t0 in Figure 11
                                                                                                Gyro Turn on from Power-On Default = t1
                           Gyro Turn On Time                     60 ms + 3/ODR                       ms
                                                                                                + t5 in Figure 11
                           Temperature Coefficient of                                                          Over-Temperature Range of
                                                                         ±0.1                     dps/°C
                           Offset (TCO)                                                                        -40°C to 85°C
                           Temperature Coefficient of                                                          Over-Temperature Range of
                                                                        ±0.05                      %/°C
                           Sensitivity (TCS)                                                                   -40°C to 85°C
                           Initial Offset Tolerance                      ±10                       dps         Board Level
                           Initial Sensitivity Tolerance                  ±3                        %          Board Level

     Note:
     9. System Turn On Time starts once VDDIO and VDD are within 1% of Final Value


     Table 9.     Magnetometer and AttitudeEngine Range and Scale

                                                                         Typical
     Subsystem                  Parameter                                                                    Unit            Comments
                                                       Scale Setting              Sensitivity
       Typical   Magnetometer Sensitivity                   Depends on            Depends on
                                                                                                           LSB/gauss
     Sensor Mode Scale Factor                              magnetometer          magnetometer
                         Magnetometer Sensitivity           Depends on            Depends on
                                                                                                           LSB/gauss
                         Scale Factor                      magnetometer          magnetometer
                         Orientation Increment                                                                               16 Bit Output
       AE Mode
                         (quaternion) Sensitivity              ±1                    16,384                LSB/unit
                         Scale Factor
                         Velocity Increment
                                                               ±32                      1,024               LSB/ms
                         Sensitivity Scale Factor




© 2022 QST Corporation                                               QMI8658C • Rev 0.9                                            www. qstcorp.com
                                                                                                                                                  18
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       3.5     Accelerometer Programmable Characteristics
     VDD = VDDIO = 1.8 V, T = 25°C unless otherwise noted. Typical numbers are provided below unless otherwise
     noted. All frequencies are ±5% and are synchronized to the gyroscope oscillator (“drive”) frequency.
     There are two sources of ODR frequency of accelerometer based on the operation mode. If only accelerometer is
     enabled, the ODR frequency is derived from the internal oscillator. If both accelerometer and gyroscope (6DOF
     mode) are enabled, the ODR frequency is derived from the natural frequency of gyroscope, which will nominally be
     0.94 multiply the ODR values of enabling accelerometer only. Table 10 shows the two sets of ODR frequency, which
     can be referenced for later descriptions in the datasheet. Refer to section 5.4 for detailed ODR configuration.
     Table 10. Accelerometer Noise Density

               Mode                                       High-Resolution                               Low-Power                  Unit
         ODR (Accel only)                                  1000 500 250       125      62.5   31.25 128 21          11     3          Hz
       ODR (Accel + Gyro)        7520      3760   1880     940 470 235 117.5 58.75 29.375                                             Hz
      Typical Noise Density        200     200     200     200 200 200        200       200    200    125 180 285 700 g/√Hz



     Table 11. Accelerometer Filter Characteristics (Accelerometer only)(10)

    Mode                                        High-Resolution                                              Low-Power                     Unit
     ODR           8000     4000         2000     1000      500       250    125       62.5   31.25   128      21        11       3
 Bandwidth
  (Default,         NA      NA           NA       275      137.5     68.8    34.4      17.2    8.6    35.2    5.8        3.0     0.8
  27.5% of
    ODR)
 Bandwidth
 with Low-
 Pass Filter
  Enabled           NA      NA           NA       26.6      13.3      6.7     3.3      1.7     0.8    3.4     0.6        0.3     0.1
  Mode 00
 (2.66% of
   ODR)
 Bandwidth
 with Low-
 Pass Filter
  Enabled           NA      NA           NA       36.3      18.2      9.1     4.5      2.3     1.1    4.6     0.8        0.4     0.1
  Mode 01                                                                                                                                  Hz
 (3.63% of
   ODR)
 Bandwidth
 with Low-
 Pass Filter
  Enabled           NA      NA           NA       53.9       27      13.5     6.7      3.4     1.7    6.9     1.1        0.6     0.2
  Mode 10
 (5.39% of
   ODR)
 Bandwidth
  with Low-
 Pass Filter
   Enabled          NA      NA           NA       133.7     66.9     33.4    16.7      8.4     4.2    17.1    2.8        1.5     0.4
  Mode 11
 (13.37% of
    ODR)
     Note:
     10. When only accelerometer is enabled, the ODR is derived from the internal oscillator.


© 2022 QST Corporation                                            QMI8658C • Rev 0.9                                           www. qstcorp.com
                                                                                                                                              19
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                               QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 12. Accelerometer Filter Characteristics (6DOF)(11)

    Mode                                High-Resolution                                     Low-Power             Unit
                                                                        58.7   29.3
     ODR          7520   3760    1880   940     470    235    117.5                   128    21     11     3
                                                                         5      75
 Bandwidth
  (Default,                             258.    129.   64.
                  2068   1034    517                           32.3     16.2   8.1    NA     NA    NA     NA
  27.5% of                               5       3      6
    ODR)
 Bandwidth
 with Low-
 Pass Filter
  Enabled         200    100      50     25     12.5   6.3     3.1      1.6    0.8    NA     NA    NA     NA
  Mode 00
 (2.66% of
   ODR)
 Bandwidth
 with Low-
 Pass Filter
   Enabled        273    136.5   68.2   34.1    17.1   8.5     4.3      2.1    1.1    NA     NA    NA     NA       Hz
   Mode 01
  (3.63% of
    ODR)
 Bandwidth
 with Low-
 Pass Filter
  Enabled         405.           101.                  12.
                         202.7          50.7    25.3           6.3      3.2    1.6    NA     NA    NA     NA
  Mode 10          3              3                     7
 (5.39% of
   ODR)
 Bandwidth
  with Low-
 Pass Filter
   Enabled        1005           251.   125.           31.
                         502.7                  62.8           15.7     7.9    3.9    NA     NA    NA     NA
  Mode 11          .4             4      7              4
 (13.37% of
    ODR)
     Note:
     11. When both accelerometer and gyroscope are enabled, all frequencies are ±5% and are synchronized to the
         nature frequency of gyroscope.




© 2022 QST Corporation                                  QMI8658C • Rev 0.9                                 www. qstcorp.com
                                                                                                                          20
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       3.6     Gyroscope Programmable Characteristics
     VDD = VDDIO = 1.8 V, T = 25°C, and represent typical numbers unless otherwise noted. All frequencies are ±5%
     and are synchronized to the gyroscope nature frequency.
     Table 13. Gyroscope Filter Characteristics

          Mode                                     High-Resolution                                   Unit
           ODR           7520     3760     1880     940     470     235     117.5   58.75   29.375
       Bandwidth
     (Default, 27.5%     2068     1034     517      258.5   129.3   64.6    32.3    16.2     8.1
        of ODR)
       Bandwidth
     with Low-Pass
     Filter Enabled       200     100       50       25     12.5     6.3     3.1     1.6     0.8
        Mode 00
    (2.66% of ODR)
        Bandwidth
     with Low-Pass
      Filter Enabled      273     136.5    68.2     34.1    17.1     8.5     4.3     2.1     1.1     Hz
         Mode 01
     (3.63% of ODR)
       Bandwidth
     with Low-Pass
     Filter Enabled      405.3    202.7    101.3    50.7    25.3    12.7     6.3     3.2     1.6
        Mode 10
    (5.39% of ODR)
       Bandwidth
     with Low-Pass
      Filter Enabled     1005.4   502.7    251.4    125.7   62.8    31.4    15.7     7.9     3.9
         Mode 11
    (13.37% of ODR)




© 2022 QST Corporation                                 QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                           21
           ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                       QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
         3.7      Electrical Characteristics
     VDD = VDDIO = 1.8 V, T = 25°C unless otherwise noted.
     Table 14 describes the names for the pins in different functions. The later descriptions will directly use the function
     name in different scenarios instead of the pin name.
     Table 14. Pin Name Mapped to Function Name

     Pin           Type      Pin Name          Function Name Function Name Function Name Function Name in
     Number                                    in 4-wire SPI in 3-wire SPI in Host I2C   I2C Master

     1             O         SDO/SA0           SDO                                    SA0

     2             IO        SDx                                                                      SDA

     3             IO        SCx                                                                      SCL

     12            I         CS                CS                CS

     13            IO        SCL               SPC               SPC                  SCL

     14            IO        SDA               SDI               SDIO                 SDA




     Table 15. Electrical Subsystem Characteristics

         Symbol                               Parameter                             Min.      Typ.        Max.          Unit
          fSPC          Host SPI Interface Speed                                                            15          MHz
                        Host I2C Interface Speed (standard mode and Fast
          fSCL          Mode are supported)                                                                 400         kHz

                                                          Standard Data
          fSCL3         Host I3C Interface Speed                                                            12.5        MHz
                                                          Rate (SDR)




     3.7.1        Current Consumption
     VDD = VDDIO = 1.8 V, T = 25°C unless otherwise noted. IDD Current refers to the current flowing into the VDD pin.
     Typical numbers are provided below.
     Table 16. Current Consumption for Accelerometer Only Typical Sensor Mode (Gyroscope
     Disabled)

                         Mode                                High-Resolution                        Low-Power            Unit
                         ODR                    1000   500    250     125    62.5     31.25   128    21     11     3      Hz
                           Filters Disabled
       Typical                                   182   155    142     134    133       132    55     42     35     30
                               (aLPF=0)
      Overall IDD                                                                                                         A
       Current             Filters Enabled
                                                 182   155    142     134    133       132    55     42     35     30
                               (aLPF=1)




© 2022 QST Corporation                                         QMI8658C • Rev 0.9                                  www. qstcorp.com
                                                                                                                                  22
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                                              QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 17. Current Consumption for Gyroscope Only Typical Sensor Mode (Accelerometer
     Disabled)

                  Mode                                                     High-Resolution                                          Unit
                                                                                                         117        58.7   29.37
                   ODR                     7520       3760      1880        940     470       235                                    Hz
                                                                                                          .5         5       5
                            Filters
      Typical             Disabled         908          861      748        689     659       656        654         653    651
      Overall             (gLPF=0)                                                                                                   A
       IDD
      Current       Filters Enabled
                                           916          863      748        689     659       656        654         653    651
                        (gLPF=1)



     Table 18. Current Consumption for 6DOF Typical Sensor Mode (Accelerometer and Gyroscope
     Enabled). VDD = VDDIO = 1.8V

                   Mode                                                          High-Resolution                                                Unit
                                                                                                                    117    58.7    29.37
                    ODR                     7520         3760        1880         940        470         235                                    Hz
                                                                                                                     .5     5        5
                              Filters
                            Disabled
                                            1004          956        843          786        757         754        752    751     750
      Typical               (aLPF=0;
     Overall IDD            gLPF=0)                                                                                                             A
      Current            Filters Enabled
                             (aLPF=1;       1031          970        850          789        758         756        753    751     750
                             gLPF=1)



     Table 19. Current Consumption for 6DOF Attitude Engine Mode (without Magnetometer). VDD =
     VDDIO = 1.8V

                          Mode                                                                                                                  Unit
                    ODR Setting                           1            2           4           8               16          32       64           Hz
                            Filters Disabled
                                                         783         783          783         783              783         783      783
      Typical Overall       (aLPF=0; gLPF=0)
                                                                                                                                                 A
       IDD Current          Filters Enabled
                                                         787         787          787         787              787         787      787
                            (aLPF=1; gLPF=1)



     Table 20. Current Consumption for 9DOF Attitude Engine Mode (with Magnetometer). VDD =
     VDDIO = 1.8V

                     Mode                                                                                                                Unit
                         ODR                      1             2          4            8          16           32         64              Hz
       Typical                 With
      Overall IDD         Magnetometer at         tbd          tbd         tbd         tbd         tbd          tbd        tbd             A
       Current               31.25 Hz




© 2022 QST Corporation                                                 QMI8658C • Rev 0.9                                                 www. qstcorp.com
                                                                                                                                                         23
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       3.8     Temperature Sensor
     The QMI8658C is equipped with an internal 16-bit              The QMI8658C outputs the internal chip temperature
     embedded temperature sensor that is automatically             that the HOST can read. The output is 16 bits, with a
     turned on by default whenever the accelerometer or            (1/256)°C per LSB resolution. To read the temperature,
     gyroscope is enabled. The temperature sensor is used          the HOST needs to access the TEMP register (see
     internally to correct the temperature dependency of           TEMP_L and TEMP_H in Data Output Registers in 0.
     calibration parameters of the accelerometer and               The HOST should synchronize to the interrupt, INT2,
     gyroscope. The temperature compensation is optimal in         signal to get valid temperature readings.
     the range of -40°C to 85°C with a resolution of 0.0625°C
     (1/16 °C) or inversely, 16 LSB/ °C.


     Table 21. Temperature Sensor Specifications

               Subsystem                          Parameter                              Typical                  Unit
                                     Range                                              -40 to +85                 °C
                                     Internal Resolution                                    16                    Bits
                                     Internal Sensitivity                                  256                  LSB/°C
     Digital Temperature Sensor
                                     Output Register Width                                  16                    Bits
                                     Output Sensitivity                                    256                  LSB/°C
                                     Refresh Rate                                            8                     Hz




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                www. qstcorp.com
                                                                                                                              24
           ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                         QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
         4 Register Map Overview
     The QMI8658C UI registers enable programming and control of the inertial measurement unit and associated on-chip
     signal processing. These registers are accessed through the UI interface – either SPI (4 wires or 3 wires) I3C, or I2C.

         4.1   UI Register Map Overview
     UI register map may be classified into the following               ▪   Count Register for time stamping the sensor
     register categories:                                                   samples
     ▪    General Purpose Registers                                     ▪   FIFO Registers: to set up the FIFO and detect
                                                                            data availability and over-run.
     ▪    Setup and Control Registers: control various
          aspects of the IMU.                                           ▪   Table 22 for UI Interface: contain all data for 9D
                                                                            sensors to be accessed from the UI interface –
     ▪    Host Controlled Calibration Registers: control and                either I2C or SPI.
          configure various aspects of the IMU via the host
          command interface called CTRL9


     Table 22. UI Register Overview

                                Register Address         Default                              Comment
          Name           Type
                                Dec Hex     Binary Binary
     General Purpose Registers
         WHO_AM_I         r      0    00   00000000 00000101 Device Identifier
      REVISION_ID         r      1    01   00000001 01101000 Device Revision ID
     Setup and Control Registers
          CTRL1           rw     2    02   00000010 00100000 SPI Interface and Sensor Enable
          CTRL2           rw     3    03   00000011 00000000 Accelerometer: Output Data Rate, Full Scale, Self Test
          CTRL3           rw     4    04   00000100 00000000 Gyroscope: Output Data Rate, Full Scale, Self Test
          CTRL4           rw     5    05   00000101 00000000 Reserved
          CTRL5           rw     6    06   00000110 00000000 Low pass filter setting
                                                                      AttitudeEngine™ Settings: Output Data Rate, Motion on
          CTRL6           rw     7    07   00000111 00000000
                                                                      Demand
          CTRL7           rw     8    08   00001000 00000000 Enable Sensors
          CTRL8           rw     9    09   00001001 00000000 Motion Detection Control
          CTRL9           rw    10    0A   00001010 00000000 Host Commands
     Host Controlled Calibration Registers (See CTRL9, Usage is Optional)
          CAL1_L          rw    11    0B   00001011 00000000 Calibration Register
          CAL1_H          rw    12   0C    00001100 00000000 CAL1_L – lower 8 bits. CAL1_H – upper 8 bits.
          CAL2_L          rw    13   0D    00001101 00000000 Calibration Register
          CAL2_H          rw    14    0E   00001110 00000000 CAL2_L – lower 8 bits. CAL2_H – upper 8 bits.
          CAL3_L          rw    15    0F   00001111 00000000 Calibration Register
          CAL3_H          rw    16    10   00010000 00000000 CAL3_L – lower 8 bits. CAL3_H – upper 8 bits.
          CAL4_L          rw    17    11   00010001 00000000 Calibration Register
          CAL4_H          rw    18    12   00010010 00000000 CAL4_L – lower 8 bits. CAL4_H – upper 8 bits.
     FIFO Registers
     FIFO_WTM_TH          rw    19    13   00010011 00000000 FIFO watermark level, in ODRs
         FIFO_CTRL        rw    20    14   00010100 00000000 FIFO Setup
     FIFO_SMPL_C
                          r     21    15   00010101 00000000 FIFO sample count LSBs
          NT
© 2022 QST Corporation                                         QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                    25
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                             QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     FIFO_STATUS         r   22   16   00010110 00000000 FIFO Status
       FIFO_DATA         r   23   17   00010111 00000000 FIFO Data
     Status Registers
                                                             Sensor Data Availability with the Locking mechanism,
       STATUSINT         r   45   2D   00101101 00000000
                                                             CmdDone (CTRL9 protocol bit).
        STATUS0          r   46   2E   00101110 00000000 Output Data Over Run and Data Availability.
        STATUS1          r   47   2F   00101111 00000000 Miscellaneous Status: Wake on Motion.
     Timestamp Register
      TIMESTAMP_
                         r   48   30   00110000 00000000
         LOW                                             Sample Time Stamp
      TIMESTAMP_                                         TIMESTAMP_LOW – lower 8 bits.
                         r   49   31   00110001 00000000
          MID                                            TIMESTAMP_MID – middle 8 bits.
     TIMESTAMP_H                                         TIMESTAMP_HIGH – upper 8 bits
                         r   50   32   00110010 00000000
         IGH
     Data Output Registers (16 bits 2’s Complement Except Self-Test Sensor Data, AE-CLIP and AE_OVFLOW)
         TEMP_L          r   51   33   00110011 00000000 Temperature Output Data
         TEMP_H          r   52   34   00110100 00000000 TEMP_L – lower 8 bits. TEMP_H – upper 8 bits
           AX_L          r   53   35   00110101 00000000 X-axis Acceleration
          AX_H           r   54   36   00110110 00000000 AX_L – lower 8 bits. AX_H – upper 8 bits
           AY_L          r   55   37   00110111 00000000 Y-axis Acceleration
          AY_H           r   56   38   00111000 00000000 AY_L – lower 8 bits. AY_H – upper 8 bits
           AZ_L          r   57   39   00111001 00000000 Z-axis Acceleration
          AZ_H           r   58   3A   00111010 00000000 AZ_L – lower 8 bits. AZ_H – upper 8 bits
          GX_L           r   59   3B   00111011 00000000 X-axis Angular Rate
          GX_H           r   60   3C   00111100 00000000 GX_L – lower 8 bits. GX_H – upper 8 bits
          GY_L           r   61   3D   00111101 00000000 Y-axis Angular Rate
          GY_H           r   62   3E   00111110 00000000 GY_L – lower 8 bits. GY_H – upper 8 bits
           GZ_L          r   63   3F   00111111 00000000 Z-axis Angular Rate
          GZ_H           r   64   40   01000000 00000000 GZ_L – lower 8 bits. GZ_H – upper 8 bits
         dQW_L           r   73   49   01001001 00000000 Quaternion Increment dQW
         dQW_H           r   74   4A   01001010 00000000 dQW_L – lower 8 bits. dQW_H – upper 8 bits
          dQX_L          r   75   4B   01001011 00000000 Quaternion Increment dQX
          dQX_H          r   76   4C   01001100 00000000 dQX_L – lower 8 bits. dQX_H – upper 8 bits
          dQY_L          r   77   4D   01001101 00000000 Quaternion Increment dQY
          dQY_H          r   78   4E   01001110 00000000 dQY_L – lower 8 bits. dQY_H – upper 8 bits
          dQZ_L          r   79   4F   01001111 00000000 Quaternion Increment dQZ
          dQZ_H          r   80   50   01010000 00000000 dQZ_L – lower 8 bits. dQZ_H – upper 8 bits
          dVX_L          r   81   51   01010001 00000000 Velocity Increment along X-axis
          dVX_H          r   82   52   01010010 00000000 dVX_L – lower 8 bits. dVX_H – upper 8 bits
          dVY_L          r   83   53   01010011 00000000 Velocity Increment along Y-axis
          dVY_H          r   84   54   01010100 00000000 dVY_L – lower 8 bits. dVY_H – upper 8 bits
          dVZ_L          r   85   55   01010101 00000000 Velocity Increment along Z-axis
          dVZ_H          r   86   56   01010110 00000000 dVZ_L – lower 8 bits. dVZ_H – upper 8 bits
        AE_REG1          r   87   57   01010111 00000000 AttitudeEngine Register 1
        AE_REG2          r   88   58   01011000 00000000 AttitudeEngine Register 2
     Reset Register
© 2022 QST Corporation                                QMI8658C • Rev 0.9                                 www. qstcorp.com
                                                                                                                        26
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
         RESET           w   96   60   01100000 00000000 Soft Reset Register




© 2022 QST Corporation                               QMI8658C • Rev 0.9        www. qstcorp.com
                                                                                              27
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                    QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       5 UI Sensor Configuration Settings and Output Data
       5.1     Typical Sensor Mode Configuration and Output Data
     In Typical Sensor Mode, QMI8658C outputs raw sensor values. The sensors are configured and read using the
     registers described below. The accelerometer and gyroscope can be independently configured. Table 23 summarizes
     these pertinent registers.
     Table 23. Typical Sensor Mode Configuration and Output Data

       Typical Sensor Configuration and Output Data
             Description           Registers       Unit                              Comments
      Sensor Enable, SPI 3 or 4
                                     CTRL1                Control power states, configure SPI communications
               Wire
                                                          Individually Enable/Disable the AttitudeEngine, Accelerometer,
             Enable Sensor           CTRL7
                                                          and Gyroscope Using sEN, aEN, and gEN bits, respectively.
      Configure Accelerometer,
                                     CTRL2                Configure Full Scale and Output Data Rate; Enable Self Test
          Enable Self Test
        Configure Gyroscope,
                                     CTRL3                Configure Full Scale and Output Data Rate; Enable Self Test
          Enable Self Test
             Sensor Filters          CTRL5                Configure and Enable/Disable Low Pass Filters
                                   STATUSINT
                 Status             STATUS0,              Data Availability, FIFO Ready to be Read, CTRL9 Protocol Bit
                                    STATUS1
                                  TIMESTAMP[
              Time Stamp                                  Sample Time Stamp (Circular Register 0 – 0xFFFFFF)
                                     H,M,L]
              Acceleration        A[X,Y,Z]_[H,L]    g     In Sensor Frame of Reference, Right-handed Coordinate System
             Angular Rate         G[X,Y,Z]_[H,L]   dps    In Sensor Frame of Reference, Right-handed Coordinate System
             Temperature           TEMP_[H,L]      °C     Temperature of the Sensor
         FIFO Based Output         FIFO_DATA              1 Byte FIFO Data Outputs




© 2022 QST Corporation                                      QMI8658C • Rev 0.9                                  www. qstcorp.com
                                                                                                                               28
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       5.2     AttitudeEngine (AE) Mode Configuration and Output Data
     In AE Mode, the QMI8658C outputs orientation (quaternion) and velocity increments.
     Orientation increments are expressed in unit quaternion format. dQ = [QW, QX, QY, QZ] where QW is the scalar
     component of the quaternion increment and QX, QY and QZ are the (imaginary) vector components of the unit
     quaternion. Velocity increments are expressed in vector format dV = [VX, VY, VZ].
     Table 24 summarizes the operation of the AttitudeEngine mode.
     Table 24. AttitudeEngine Mode Configuration and Output Registers

       AttitudeEngine Mode
             Configuration            Registers       Unit                           Comments
      Sensor Enable, SPI 3 or 4
                                        CTRL1                Control power states, SPI communications
               Wire
                                                             Enable the AttitudeEngine (CTRL7, sEN =1, aEN=1, gEN=1,
         Enable AttitudeEngine          CTRL7
                                                             optionally mEN=1 if external magnetometer is available)
                Configure               CTRL6                AttitudeEngine Output Data Rate and Motion on Demand
       Configure Accelerometer,
                                        CTRL2                Configure Full Scale; Enable Self Test
           Enable Self Test
         Configure Gyroscope,
                                        CTRL3                Configure Full Scale; Enable Self Test
           Enable Self Test
       Configure Magnetometer           CTRL4                Configure Output Data Rate and choose device
              Sensor Filters            CTRL5                Configure and Enable/Disable Low Pass Filters
         Quaternion Increment     dQ[W,X,Y,Z]_[H,L]          Unit Quaternion format in sensor frame
                                                             Rotation compensated velocity increment (based on specific
            Velocity Increment      dV[X,Y,Z]_[H,L]   ms-1
                                                             force), rotated to sensor frame of reference
                                                             Rotation compensated magnetic field (rotated to sensor frame
             Magnetic Field         M[X,Y,Z]_[H,L] gauss
                                                             of reference)
                                     STATUSINT
                  Status              STATUS0,               Data Availability, Wake on Motion detected
                                      STATUS1
                                                             Magnetometer and Gyroscope bias update
         Bias Update, Clipping,      AE_CLIP,
                                                             acknowledgement, Sensor clipping acknowledgement,
               Overflow             AE_OVFLOW
                                                             Velocity increment overflow
              Temperature            TEMP_[H,L]       °C Temperature of the sensor


       5.3     General Purpose Register
     Table 25. General Purpose Register Description

            Register Name
     WHO_AM_I                     Register Address: 0 (0x00)
     Bits           Name              Default                                     Description
      7:0     WHO_AM_I                 0x05           Device identifier 0x05 - to identify the device is a QST sensor
      7:0     REVISION_ID              0x79           Device Revision ID




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                                 29
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       5.4     Configuration Registers
     This section describes the various operating modes and register configurations of the QMI8658C.
     Table 26. Configuration Registers Description

           Register Name
     CTRL1                       Serial Interface and Sensor Enable. Register Address: 2 (0x02)
     Bits          Name               Default                                    Description
                                                    0: Enables 4-wire SPI interface
       7     SIM                        1’b0
                                                    1: Enables 3-wire SPI interface
                                                    0: Serial interface (SPI or I2C) address do not auto increment.
       6     ADDR_AI                    1’b0
                                                    1: Serial interface (SPI or I2C) address auto increment
                                                    0: Serial interface (SPI or I2C) read data little endian
       5     BE                         1’b1
                                                    1: Serial interface (SPI or I2C) read data big endian
      4:1    Reserved                   4’b0        Reserved
                                                    0: Enables internal 2 MHz oscillator
       0     SensorDisable              1’b0
                                                    1: Disables internal 2 MHz oscillator
     CTRL2                       Accelerometer Settings: Address: 3 (0x03)
     Bits          Name               Default                                    Description
       7     aST                        1’b0        Enable Accelerometer Self Test.
                                                    Set Accelerometer Full-scale:
                                                    000 - Accelerometer Full-scale = ±2 g
                                                    001 - Accelerometer Full-scale = ±4 g
      6:4    aFS<2:0>                   3’b0
                                                    010 - Accelerometer Full-scale = ±8 g
                                                    011 – Accelerometer Full-scale = ±16 g
                                                    1xx – N/A
                                                    Set Accelerometer Output Data Rate (ODR):
                                                               ODR Rate (Hz)   ODR Rate (Hz)
                                                     Setting                                       Mode        Duty Cycle
                                                                (Accel only)     (6DOF)(13)
                                                      0000          N/A             7520          Normal         100%
                                                      0001          N/A             3760          Normal         100%
                                                      0010          N/A             1880          Normal         100%
                                                      0011         1000              940          Normal         100%
                                                      0100          500              470          Normal         100%
                                                      0101          250              235          Normal         100%
      3:0    aODR<3:0>(12)(13)          4’b0          0110          125             117.5         Normal         100%
                                                      0111          62.5            58.75         Normal         100%
                                                      1000         31.25           29.375         Normal         100%
                                                      1001          N/A              N/A
                                                      1010          N/A              N/A
                                                      1011          N/A              N/A
                                                      1100          128              N/A        Low Power        100%
                                                      1101           21              N/A        Low Power         58%
                                                      1110           11              N/A        Low Power         31%
                                                      1111            3              N/A        Low Power        8.5%

     Table 26 Configuration Register Description (Continued)

     Register Name
     CTRL3                       Gyroscope Settings: Address 4 (0x04)

© 2022 QST Corporation                                    QMI8658C • Rev 0.9                                      www. qstcorp.com
                                                                                                                                 30
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                            QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
      Bits         Name            Default                                   Description
       7     gST                     1’b0        Enable Gyro Self-Test.
                                                 Set Gyroscope Full-scale:
                                                 000 - ±16 dps
                                                 001 - ±32 dps
                                                 010 - ±64 dps
      6:4    gFS<2:0>                3’b0        011 - ±128 dps
                                                 100 - ±256 dps
                                                 101 - ±512 dps
                                                 110 - ±1024dps
                                                 111 - ±2048 dps
                                                 Set Gyroscope Output Data Rate (ODR):
                                                   Setting   ODR Rate (Hz)    Mode         Duty Cycle
                                                    0000         7520         Normal         100%
                                                    0001         3760         Normal         100%
                                                    0010         1880         Normal         100%
                                                    0011          940         Normal         100%
                                                    0100          470         Normal         100%
                                                    0101          235         Normal         100%
                                                    0110        117.5         Normal         100%
      3:0    gODR<3:0> (13)          4’b0
                                                    0111        58.75         Normal         100%
                                                    1000        29.375        Normal         100%
                                                    1001          N/A
                                                    1010          N/A
                                                    1011          N/A
                                                    1100          N/A
                                                    1101          N/A
                                                    1110          N/A
                                                    1111          N/A
     CTRL4                    Reserved – Special Settings. Register Address: 5 (0x05)
      Bits         Name            Default                                   Description
      7:0    Reserved               0x00         Not Used


     Note:
     12. The accelerometer low power mode is only available when the gyroscope is disabled
     13. In 6DOF mode (accelerometer and gyroscope are both enabled), the ODR is derived from the nature frequency
         of gyroscope, refer to section 3.5 for more information.




© 2022 QST Corporation                                 QMI8658C • Rev 0.9                               www. qstcorp.com
                                                                                                                       31
             ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                        QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 26 Configuration Register Description (Continued)

           Register Name
     CTRL5                 Sensor Data Processing Settings. Register Address: 6 (0x06)
     Bits           Name         Default                                 Description
       7      Reserved             1’b0

                                                gLPF_MODE                 BW [Hz]
                                                    00                 2.66% of ODR
      6:5     gLPF_MODE            2’b0
                                                    01                 3.63% of ODR
                                                    10                 5.39% of ODR
                                                    11                13.37% of ODR
                                               0: Disable Gyroscope Low-Pass Filter.
       4      gLPF_EN              1’b0        1: Enable Gyroscope Low-Pass Filter with the mode given by
                                               gLPF_MODE.
       3      Reserved             1’b0

                                                aLPF_MODE                 BW [Hz]
                                                    00                 2.66% of ODR
       2:1    aLPF_MODE            2’b0
                                                    01                 3.63% of ODR
                                                    10                 5.39% of ODR
                                                    11                13.37% of ODR
                                               0: Disable Accelerometer Low-Pass Filter.
       0      aLPF_EN              1’b0        1: Enable Accelerometer Low-Pass Filter with the mode given by
                                               aLPF_MODE.
     CTRL6                 Attitude Engine ODR and Motion on Demand: Address: 7 (0x07)
      Bits          Name         Default                                 Description
                                               0: Disables Motion on Demand.
       7      sMoD                 1’b0
                                               1: Enables Motion on Demand (Requires sEN=1).
      6:3     Reserved             4’b0
                                               Attitude Engine Output Data Rate (ODR)
                                                           Setting                      ODR Rate (Hz)
                                                             000                             1
                                                             001                             2
                                                             010                             4
      2:0     sODR<2:0>            3’b0
                                                             011                             8
                                                             100                             16
                                                             101                             32
                                                             110                             64




© 2022 QST Corporation                           QMI8658C • Rev 0.9                                 www. qstcorp.com
                                                                                                                   32
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 26 Configuration Register Description (Continued)

            Register Name
     CTRL7                         Enable Sensors and Configure Data Reads. Register Address: 8 (0x08)
      Bits           Name                 Default                                  Description
                                                          0: Disable syncSmple mode
        7     syncSmpl                      1’b0
                                                          1: Enable syncSmple mode
                                                          1: High Speed Internal Clock
        6     sys_hs                        1’b0
                                                          0: Clock based on ODR
        5     Reserved                      1’b0
                                                          0: Gyroscope in Full Mode (Drive and Sense are enabled).
        4     gSN                           1’b0          1: Gyroscope in Snooze Mode (only Drive enabled).
                                                          This bit is effective only when gEN is set to 1.
                                                          0: Disable AttitudeEngine orientation and velocity increment
                                                          computation
        3     sEN                           1’b0
                                                          1: Enable AttitudeEngine orientation and velocity increment
                                                          computation
        2     Reserved                      1’b0
                                                          0: Gyroscope placed in Standby or Power-down Mode.
        1     gEN                           1’b0
                                                          1: Enable Gyroscope.
                                                          0: Accelerometer placed in Standby or Power-down Mode.
        0     aEN                           1’b0
                                                          1: Enable Accelerometer.
     CTRL8                         Motion Detection Control. Register Address: 9 (0x09)
      Bits           Name                 Default                                  Description
        7     CTRL9                         1b’0          0: use INT1 as CTRL9 handshake
              Handshaking Type                            1: use STATUSINT.bit7 as CTRL9 handshake
        6     INT pin for Motion            1b’0          0: INT2 is used for motion detection event interrupt
              detection event                             1: INT2 is used for motion detection event interrupt
                                                          Note: this bit will influence the any/no/sig-motion, pedometer,
                                                          tap detection interrupt
        5     reserved                      1b’0
        4     Pedometer Enable              1b’0          0: disable Pedometer engine
                                                          1: enable Pedometer engine
        3     Significant Motion            1b’0          0: disable Significant Motion engine
              Enable                                      1: enable Significant Motion engine
        2     No Motion Enable              1b’0          0: disable No Motion engine
                                                          1: enable No Motion engine
        1     Any Motion                    1b’0          0: disable Any Motion engine
              Enable                                      1: enable Any Motion engine
        0     Tap Enable                    1b’0          0: disable Tap engine
                                                          1: enable Tap engine
            Register Name
                                   Host Commands. Register Address: 10 (0x0A), Referred to:
     CTRL9
                                   5.9 CTRL 9 Functionality (Executing Pre-defined Commands)




© 2022 QST Corporation                                   QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                              33
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                              QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       5.5     FIFO Registers
     Table 27. FIFO Control/Status/Data Registers

              Register Name
      FIFO_WTM_TH                FIFO Watermark Register Address: 19 (0x13)
       Bits              Name       Default                                  Description
        7:0         FIFO_WTM         8’h0      Number of ODRs needed to trigger watermark
      FIFO_CTRL                  FIFO Control Register Address: 20 (0x14)
       Bits              Name       Default                                   Description
                                                This bit is automatically set by using a CTRL9 command to request
                                                the FIFO to read data out of FIFO via FIFO_DATA register. It must
         7     FIFO_RD_MODE           1’b0
                                                be cleared again after the data read is complete so that writing data
                                                to the FIFO can resume.
        6:4    Reserved               3’b0
                                                 FIFO_SIZE[1:0]        FIFO Sample Size
                                                        00             16 samples
        3:2    FIFO_SIZE              2’b0              01             32 samples
                                                        10             64 samples
                                                        11             128 samples
                                                 FIFO_MODE[1:0]          FIFO Sample Size
                                                         00              Bypass (FIFO disable)
                                                         01              FIFO
                                                         10              Stream
        1:0    FIFO_MODE              2’b0
                                                         11              Stream to FIFO. In stream to
                                                                         FIFO mode, once
                                                                         motion/gesture interrupt event
                                                                         happens, content of FIFO will
                                                                         be emptied, pointers reset
      FIFO_SMPL_CNT              FIFO Sample Count Register Address: 21 (0x15)
       Bits              Name       Default     Description
               FIFO_SMPL_CNT_L
        7:0                           8’b0      8 LS bits of FIFO Sample Count (in bytes).
               SB
      FIFO_STATUS                FIFO Status. Register Address 22 (0x16)
       Bits              Name       Default                                   Description
                                                0 – FIFO is not Full
         7     FIFO_FULL              1’b0
                                                1 -- FIFO is Full
                                                0 -- FIFO Water Mark Level not hit.
         6     FIFO_WTM               1’b0
                                                1 – FIFO Water Mark Level Hit
                                                0 – FIFO Overflow has not happened
         5     FIFO_OVFLOW            1’b0      1 -- FIFO Overflow condition has happened (attempt to save ODR
                                                data to FIFO when it is full)
                                                0 – FIFO is Empty
         4     FIFO_NOT_EMPTY         1’b0
                                                1 -- FIFO is not Empty
        3:2    Reserved               2’b0
               FIFO_SMPL_CNT_
        1:0                           2’b0      2 MS bits of FIFO Sample Count (in bytes).
               MSB


© 2022 QST Corporation                              QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                         34
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
      FIFO_DATA                       FIFO DATA Output Register Address: 23 (0x17)
       Bits              Name             Default    Description
        7:0     FIFO_DATA                   8’b0     8 bit FIFO data output.




       5.6      Status and Time Stamp Registers


     Table 28. Status and Time Stamp Registers

              Register Name
      STATUSINT                      Sensor Data Available and Lock Register Address: 45 (0x2D)
       Bits              Name            Default                                 Description
                                                     Bit read by Host Processor as part of CTRL9 register protocol. Used
                                                     to indicate ctrl9 Command was done. Please Refer to 5.9.3 and
         7      Ctrl9 CmdDone              1’b0      5.9.4 for more details.
                                                     0: Not Completed
                                                     1: Done
        6:2     Reserved                   5’b0
                                                     If syncSmpl = 1 (Bit 7 in CTRL7) then:
                                                              0: Sensor Data not locked.
         1      Locked                     1’b0               1: Sensor Data Locked.
                                                     If syncSmpl = 0 then bit 1 will have the same value of the Interrupt
                                                     in INT1.
                                                     If syncSmpl = 1 (Bit 7 in CTRL7) then:
                                                              0: Sensor Data not available
         0      Avail                      1’b0               1: Sensor Data available for reading
                                                     If syncSmpl = 0 then bit 0 will have the same value of the Interrupt
                                                     in INT2.
      STATUS0                        Output Data Status Register Address: 46 (0x2E)
       Bits              Name            Default     Description

        7:4     Reserved                   4’b0

                                                     AE new data available
         3      sDA                        1’b0      0: No updates since last read.
                                                     1: New data available.
         2      Reserved                   1’b0
                                                     Gyroscope new data available
         1      gDA                        1’b0      0: No updates since last read.
                                                     1: New data available.
                                                     Accelerometer new data available
         0      aDA                        1’b0      0: No updates since last read.
                                                     1: New data available.
                STATUS1              Miscellaneous Status. Register Address 47 (0x2F)
       Bits              Name            Default                                 Description
                                                     0: No Significant-Motion was detected
         7      Significant Motion         1’b0
                                                     1: Significant-Motion was detected
© 2022 QST Corporation                                   QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                              35
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                               QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                                0: No No-Motion was detected
         6     No Motion             1’b0
                                                1: No-Motion was detected
                                                0: No Any-Motion was detected
         5     Any Motion            1’b0
                                                1: Any-Motion was detected
                                                0: No step was detected
         4     Pedometer             1’b0
                                                1: step was detected
         3     Reserved              1’b0
         2     Reserved              1’b0
                                                0: No Tap was detected
         1     TAP                   1’b0
                                                1: Tap was detected
         0     Reserved              1’b0
                                3 Bytes Sample Time Stamp – Output Count. Register Address: 48 - 50
      TIMESTAMP
                                (0x30 - 0x32)
       Bits              Name       Default                                 Description
               TIMESTAMP_L<7:
        7:0                          0x00
               0>
                                                Sample time stamp. Count incremented by one for each sample
               TIMESTAMP_M<1
        7:0                          0x00       (x, y, z data set) from sensor with highest ODR (circular register
               5:8>
                                                0x0-0xFFFFFF).
               TIMESTAMP_H<2
        7:0                          0x00
               3:16>




© 2022 QST Corporation                              QMI8658C • Rev 0.9                                     www. qstcorp.com
                                                                                                                          36
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                           QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       5.7     Sensor Data Output Registers
     Table 29. Sensor Data Output Registers Description

           Register Name
      TEMP_[H,L]             Temp Sensor Output. Register Address: 51 – 52, (0x33 – 0x34)
       Bits          Name         Default                                Description
       7:0          TEMP_L          0x00
                                                          Temperature output (°C) in two’s complement.
       7:0         TEMP_H           0x00
           Register Name
      A[X,Y,Z]_[H,L]         Acceleration Output. Register Address: 53 – 58, (0x35 – 0x3A)
       Bits          Name         Default                                Description
        7:0   AX_L<7:0>             0x00        X-axis acceleration in two’s complement.
        7:0   AX_H<15:8>            0x00        AX_L – lower 8 bits. AX_H – upper 8 bits.

        7:0   AY_L<7:0>             0x00        Y-axis acceleration in two’s complement.
        7:0   AY_H<15:8>            0x00        AY_L – lower 8 bits. AY_H – upper 8 bits.

        7:0   AZ_L<7:0>             0x00        Z-axis acceleration in two’s complement.
        7:0   AZ_H<15:8>            0x00        AZ_L – lower 8 bits. AZ_H – upper 8 bits.

           Register Name
      G[X,Y.Z]_[H,L]         Angular Rate Output. Register Address: 59 – 64 (0x3B – 0x40)
       Bits          Name         Default                                Description
        7:0   GX_L<7:0>             0x00        X-axis angular rate in two’s complement.
        7:0   GX_H<15:8>            0x00        GX_L – lower 8 bits. GX_H – upper 8 bits.

        7:0   GY_L<7:0>             0x00        Y-axis angular rate in two’s complement.
        7:0   GY_H<15:8>            0x00        GY_L – lower 8 bits. GY_H – upper 8 bits.

        7:0   GZ_L<7:0>             0x00        Z-axis angular rate in two’s complement.
        7:0   GZ_H<15:8>            0x00        GZ_L – lower 8 bits. GZ_H – upper 8 bits.
                                                                                   Continued on the following page




© 2022 QST Corporation                            QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                      37
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                             QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
      Table 29 Sensor Data Output Registers Description (Continued)
             Register Name
      dQ[1,2,3,4]_[H,L]         Quaternion Output. Register Addresses: 73 – 80 (0x49 – 0x50)
       Bits              Name         Default                                Description
        7:0    dQW_L<7:0>              0x00        Quaternion Increment dQW in two’s complement.
        7:0    dQW_H<15:8>             0x00        dQW_L – lower 8 bits. dQW_H – upper 8 bits.

        7:0    dQX_L<7:0>              0x00        Quaternion Increment dQX in two’s complement.
        7:0    dQX_H<15:8>             0x00        dQX_L – lower 8 bits. dQX_H – upper 8 bits.

        7:0    dQY_L<7:0>              0x00        Quaternion Increment dQY in two’s complement.
        7:0    dQY_H<15:8>             0x00        dQY_L – lower 8 bits. dQY_H – upper 8 bits.

        7:0    dQZ_L<7:0>              0x00        Quaternion Increment dQZ in two’s complement.
        7:0    dQZ_H<15:8>             0x00        dQZ_L – lower 8 bits. dQZ_H – upper 8 bits.

      dV[X,Y,Z]_[H,L]           Delta Velocity Output. Register Address: 81 – 86 (0x51– 0x56)
       Bits          Name              Bits                                     Name
        7:0    dVX_L<7:0>              0x00        X-axis Velocity Increment in two’s complement.
        7:0    dVX_H<15:8>             0x00        dVX_L – lower 8 bits. dVX_H – upper 8 bits.

        7:0    dVY_L<7:0>              0x00        Y-axis Velocity Increment in two’s complement.
        7:0    dVY_H<15:8>             0x00        dVY_L – lower 8 bits. dVY_H – upper 8 bits.

        7:0    dVZ_L<7:0>              0x00        Z-axis Velocity Increment in two’s complement.
        7:0    dVZ_H<15:8>             0x00        dVZ_L – lower 8 bits. dVZ_H – upper 8 bits.

      AE_REG1                   AttitudeEngine Register 1, Address: 87 (0x57)
       Bits          Name            Default                                Description
         7     Reserved                1’b0
                                                   Acknowledgement that Gyro Bias was updated during this time
         6     GyroBiasAck             1’b0
                                                   period.
         5     wz_clip                 1’b0        Gyroscope Z-axis data was clipped during the dQ calculation.
         4     wy_clip                 1’b0        Gyroscope Y-axis data was clipped during the dQ calculation.
         3     wx_clip                 1’b0        Gyroscope X-axis data was clipped during the dQ calculation.
         2     az_clip                 1’b0        Accelerometer Z-axis data was clipped during the dQ calculation.
         1     ay_clip                 1’b0        Accelerometer Y-axis data was clipped during the dQ calculation.
         0     ax_clip                 1’b0        Accelerometer X-axis data was clipped during the dQ calculation.




© 2022 QST Corporation                               QMI8658C • Rev 0.9                                  www. qstcorp.com
                                                                                                                        38
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                              QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 29 Sensor Data Output Registers Description (Continued)

        Register Name
     AE_REG2               AttitudeEngine Register 2, Address: 88 (0x58)
      Bits        Name           Default                                     Description
      7:3     Reserved            5’b0
        2     dvz_of              1’b0        Velocity Increment overflow along dvz.
        1     dvy_of              1’b0        Velocity Increment overflow along dvy.

        0     dvx_of              1’b0        Velocity Increment overflow along dvx.



     Table 30. AttitudeEngine Modes and Output Table

                                                                                                Comments on
                Mode/Outputs                 dQ            dV           M       TIMESTAMP
                                                                                                 TIMESTAMP
      AttitudeEngine in ODR Mode (Accelerometer and Gyroscope Enabled)
      CTRL6 Register     sMoD=0
                                                                                                24-bit data.
                         gSN=0                                                                  Count starts at 1,
                         sEN=1           Quaternion    Velocity                AttitudeEngine   16,777,216
                                                                    No Data
                                         Increment     Increment               Sample Count     count wraps to 0,
      CTRL7 Register     aEN=1                                                                  i.e.
                         gEN=1                                                                  Mod(16,777,216)
                         mEN=0
      AttitudeEngine in Motion on Demand (MoD) mode (Accelerometer and Gyroscope enabled)
      CTRL6 Register     sMoD=1
                                                                                                24-bit data.
                         gSN=0                                                 Gyroscope        Count starts at 1,
                         sEN=1           Quaternion    Velocity                Samples in       16,777,216
                                                                    No Data
                                         Increment     Increment               Integration      count wraps to 0,
      CTRL7 Register     aEN=1                                                 Window           i.e.
                         gEN=1                                                                  Mod(16,777,216)
                         mEN=0
      AttitudeEngine with Raw Magnetometer in ODR Mode (Accelerometer, Gyroscope and
      Magnetometer Enabled)

      CTRL6 Register     sMoD=0
                                                                                                24-bit data.
                         gSN=0                                                                  Count starts at 1,
                                                                    Initial
                         sEN=1           Quaternion    Velocity             AttitudeEngine      16,777,216
                                                                    Raw Mag
                                         Increment     Increment            Sample Count        count wraps to 0,
      CTRL7 Register     aEN=1                                      Data
                                                                                                i.e.
                         gEN=1                                                                  Mod(16,777,216)
                         mEN=1




© 2022 QST Corporation                                  QMI8658C • Rev 0.9                                www. qstcorp.com
                                                                                                                         39
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                     QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       5.8     Reset register
     Table 31. Reset Register Description

            Register Name
     RESET                       Register Address: 96 (0x60)
     Bits           Name              Default                                      Description
                                                     Soft Reset Register - Write 0xB0 to this register from any modes, will
      7:0     RESET                     0x00
                                                     trigger the sensor reset process immediately.



       5.9     CTRL 9 Functionality (Executing Pre-defined Commands)

     5.9.1     CTRL 9 Description                                 5.9.2     WCtrl9 (Write – CTRL9 Protocol)
     The protocol for executing predefined commands from          1.   The host needs to provide the required data for this
     an external host processor on the QMI8658C is                     command to the QMI8658C. The host typically
     facilitated by using the Control 9 (CTRL9) register. The          does this by placing the data in a set of registers
     register is available to the host via the UI SPI/I 2C/I3C         called the CAL buffer. Eight CAL registers are used;
     bus. It operates by the host writing a pre-defined value          the following table provides the name and
     (Command) to the CTRL9 register. The firmware of the              addresses of these registers.
     QMI8658C evaluates this command and if a match is            2.   Write Ctrl9 register 0x0a with the appropriate
     found it executes the corresponding pre-defined                   Command value.
     function. Once the function has been executed, the           3.   The Device will set STATUSINT.bit7 to 1, and raise
     QMI8658C signals the completion of this by setting                INT1(if CTRL8.bit7 == 0), once it has executed the
     STATUSINT.bit7 to 1 ， and raising INT1 interrupt if               appropriate function based on the command value.
     CTRL8.bit7 == 0. The host must acknowledge this by           4.   The host must acknowledge this by reading
     reading STATUSINT.bit7, This is the CmdDone bit. After            STATUSINT.bit7 (CmdDone) which is reset to 0 on
     this read, the QMI8658C clear the STATUSINT.bit7 to 0             reading the register, completing the CTRL9
     and pulls down the INT1 interrupt if CTRL8.bit7 == 0.             transaction. And INT1 is pulled low upon the
     This command presentation from the host to the                    register read if CTRL8.bit7 == 0.
     QMI8658C and the subsequent execution and                    5.   If any data is expected from the device, it will be
     handshake between the host and the QMI8658C will be               available at this time. The location of the data is
     referred to as the “CTRL9 Protocol”.                              specified separately for each of the Commands.
     There are three types of interactions between the host
     and QMI8658C that follow the CTRL9 Protocol.                 Table 32. CAL Register Addresses
     WCtrl9: The host needs to supply data to QMI8658C                                           Register Address
     prior to the Ctrl9 protocol. (Write – Ctrl9 Protocol)        Register Name
     Ctrl9R: The host gets data from QMI8658C following                                      Dec               Hex
     the Ctrl9 protocol. (Ctrl9 protocol – Read)                          CAL1_L              11              0x0B
     Ctrl9: No data transaction is required prior to or                  CAL1_H               12              0x0C
     following the Ctrl9 protocol. (Ctrl9).                               CAL2_L              13              0x0D
                                                                         CAL2_H               14              0x0E
                                                                          CAL3_L              15              0x0F
                                                                         CAL3_H               16               0x10
                                                                          CAL4_L              17               0x11
                                                                         CAL4_H               18               0x12




© 2022 QST Corporation                                      QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                                40
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                         QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     5.9.3     Ctrl9R (CTRL9 Protocol - Read)                      5.9.4 Ctrl9 (CTRL9 Protocol
     1.   Write Ctrl9 register 0x0A with the appropriate           Acknowledge)
          Command value.                                           1.    Write CTRL9 register 0x0A with the appropriate
     2.   The Device will set STATUSINT.bit7 to 1, and raise             Command value.
          INT1 (if CTRL8.bit7 == 0), once it has executed the      2.    The Device set STATUSINT.bit7 to 1, and raise
          appropriate function based on the command value.               INT1 (if CTRL8.bit7 == 0), once it has executed the
     3.   The host must acknowledge this by reading                      appropriate function based on the command value.
          STATUSINT.bit7 (CmdDone) which is then reset to          3.    The host must acknowledge this by reading
          0 upon reading the register, completing the CTRL9              STATUSINT.bit7 (CmdDone) which is then reset to
          transaction. INT1 is pulled low upon the register              0 upon reading the register, completing the CTRL9
          read if CTRL8.bit7 == 0.                                       transaction. INT1 is pulled low upon the register
          Data is available from the device at this time. The            read if CTRL8.bit7 == 0.
          location of the data is specified separately for each
          of the Commands.


     Table 33. CTRL9 Register CMND Values

                                                   CTRL9
                                                                     Protocol
                   CMND Name                      Command                                        Description
                                                                       Type
                                                    Value
     CTRL_CMD_NOP                                     0x00              Ctrl9     No operation
                                                                                  Copies bias_gx,y,z from CAL registers to
     CTRL_CMD_GYRO_BIAS                               0x01              WCtrl9
                                                                                  FIFO and set GYROBIAS_PEND bit
                                                                                  SDI MOD (Motion on Demand), request to
     CTRL_CMD_REQ_SDI                                 0x03              Ctrl9R
                                                                                  read SDI data
     CTRL_CMD_RST_FIFO                                0x04              Ctrl9     Reset FIFO from Host
     CTRL_CMD_REQ_FIFO                                0x05              Ctrl9R    Get FIFO data from Device
                                                                                  Set up and enable Wake on Motion
     CTRL_CMD_WRITE_WOM_SETTING                       0x08              WCtrl9
                                                                                  (WoM)
     CTRL_CMD_ACCEL_HOST_DELTA_
                                                      0x09              WCtrl9    Change accelerometer offset
     OFFSET
     CTRL_CMD_GYRO_HOST_DELTA_O
                                                      0x0A              WCtrl9    Change gyroscope offset
     FFSET
     CTRL_CMD_COPY_USID                               0x10              Ctrl9R    Read USID_Bytes and FW_Version bytes
     CTRL_CMD_SET_RPU                                 0x11              WCtrl9    Configures IO pull-ups
     CTRL_CMD_AHB_CLOCK_GATING                        0x12              WCtrl9    Internal AHB clock gating switch
     CTRL_CMD_ON_DEMAND_CALIBRA
                                                      0xA2              WCtrl9    On-Demand Calibration on gyroscope
     TION




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                      www. qstcorp.com
                                                                                                                                    41
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                       QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     5.9.5     CTRL9 Commands in Detail                             CTRL_CMD_ACCEL_HOST_DELTA_OFFSET
                                                                    This CTRL9 Command is issued when the host wants to
     CTRL_CMD_NOP                                                   manually change the accelerometer offset. Each delta
     No Operation                                                   offset value should contain 16 bits and the format is
                                                                    signed 4.12 (12 fraction bits). The user must write the
                                                                    offset to the following registers:
     CTRL_CMD_GYRO_BIAS
                                                                               Accel_Delta_X : {CAL1_H, CAL1_L}
     This CTRL9 Command is issued to copy bias_gx,
                                                                               Accel_Delta_Y : {CAL2_H, CAL2_L}
     bias_gy, bias_gz from CAL registers to FIFO and set
                                                                               Accel_Delta_Z : {CAL3_H, CAL3_L}
     GYROBIAS_PEND bit. CAL3_[H,L] is bias_gz,
     CAL2_[H,L] is bias_gy, CAL1_[H,L] is bias_gx.                  Next, the Command is issued by writing 0x09 to CTRL9
                                                                    register 0x0A. Note, this offset change is lost when the
     CTRL_CMD_REQ_SDI                                               sensor is power cycled or the system is reset.
     This CTRL9 command is used to retrieve motion data
                                                                    CTRL_CMD_GYRO_HOST_DELTA_OFFSET
     from the QMI8658C when Motion on Demand mode
     (MoD) is enabled. To enable MoD the device should              This CTRL9 Command is issued when the host wants to
     have the AttitudeEngine orientation enabled. This can          manually change the gyroscope offset. Each delta offset
     be done by enabling the AttitudeEngine by setting              value should contain 16 bits and the format is signed
     CTRL7 Bit 3 (sEN) to 1. Then the MoD mode can be               11.5 (5 fraction bits). The user must write the offset to
     enabled by setting CTRL6 Bit 7 (sMoD) to 1. The                the following registers:
     CTRL_CMD_REQ_MoD command is then issued by
     writing 0x0C to CTRL9 register 0x0A. This indicates to                    Gyro_Delta_X : {CAL1_H, CAL1_L}
     the QMI8658C that it is required to supply the motion                     Gyro_Delta_Y : {CAL2_H, CAL2_L}
     data to the host. The device immediately makes                            Gyro_Delta_Z : {CAL3_H, CAL3_L}
     available the orientation and velocity increments it has       Next, the Command is issued by writing 0x0A to CTRL9
     computed so far to the host by making them available at        register 0x0A. Note, this offset change is lost when the
     output registers 0x25 to 0x3D and raises the INT1 to           sensor is power cycled or the system is reset.
     indicate to the host that valid data is available.
                                                                    CTRL_CMD_COPY_USID
     CTRL_CMD_RST_FIFO
                                                                    This CTRL9 Command copies the following data into UI
     This CTRL9 command of writing 0x04 to the Ctrl9                registers. It is initiated by the host writing 0x10 to
     register 0x0a allows the host to instruct the device to        CTRL9. After issuing the command, the data will be
     reset the FIFO.                                                available for the host to read from the registers shown
                                                                    below:
     CTRL_CMD_REQ_FIFO
                                                                              FW_Version byte 0 → dQW_L
     This CTRL9 Command is issued when the host wants to                      FW_Version byte 1 → dQW_H
     get data from the FIFO. When the FIFO is enabled it will
     be indicated to the host by asserting INT2 and thus                      FW_Version byte 2 → dQX_L
     signaling that a flag condition (like FIFO full) has been                USID_Byte_0 → dVX_L
     reached and that data is available to be read by the                     USID_Byte_1 → dVX_H
     host. This Command is issued by writing 0x05 to the
                                                                              USID_Byte_2 → dVY_L
     CTRL9 register 0x0A. The device will raise INT1 to
     indicate that it is ready for a FIFO transaction. The host               USID_Byte_3 → dVY_H
     must read the STATUS1 register bit 0 (CmdDone). The                      USID_Byte_4 → dVZ_L
     device will direct the FIFO data to the FIFO_DATA                        USID_Byte_5 → dVZ_H
     register 0x17 until the FIFO is empty. Then the host
     must set FIFO_rd_mode to 0, which will cause the INT2
                                                                    CTRL_CMD_SET_RPU
     to be de-asserted.
                                                                    This CTRL9 Command is issued when the host wants to
     CTRL_CMD_WRITE_WOM_SETTING                                     manually configure the IO pull-up resistors. Each bit
                                                                    controls a combination of resistors as shown below:
     This CTRL9 Command is issued when the host wants to
     enable/modify the trigger thresholds or blanking interval        aux_rpu_dis: CAL1_L bit[0], SDX, SCX, RESV-
     of the Wake on Motion Feature of the device. Please            NC(Pin 10)
     refer to Section 9 for details for setting up this feature.      icm_rpu_dis: CAL1_L bit[1], SDX
     Once the specified CALx registers are loaded with the
                                                                      cs_rpu_dis: CAL1_L bit[2], CS
     appropriate data, the Command is issued by writing
     0x08 to CTRL9 register 0x0A.                                     ics_rpu_dis: CAL1_L bit[3], SCL, SDA
                                                                    The host writes the appropriate CAL1_L bit by issuing a
                                                                    WCtrl9 command with 0x11.


© 2022 QST Corporation                                        QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                                  42
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                              QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     CTRL_CMD_AHB_CLOCK_GATING                             CTRL_CMD_ON_DEMAND_CALIBRATION
     When locking Mechanism is set (CTRL7.bit7 ==          This CTRL9 Command enables host to recalibrate the
     1(syncSmpl)), the CTRL_CMD_AHB_CLOCK_GATING           gyro sensitivity from time to time. The host must disable
     should also be disabled to guarantee the locking      all the sensors by write 0x00 to CTRL7 first and then
     mechanism of data reading, to prevent the possible    start the CTRL9 command process. During which, it is
     misalignment.                                         not necessary to place the device in quiet. The
                                                           recalibrated parameters will be applied to the sensor
                                                           data afterwards and will be lost if a power on reset or
                                                           soft reset is implemented.




© 2022 QST Corporation                               QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                         43
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                        QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       6 Interrupts

       6.1     Overview
     The QMI8658C has two Interrupt lines, INT1 and INT2.           With syncSmpl = 1 (refer to Table 26, CTRL7 register bit
     INT1 is used as a general-purpose interrupt. The details       7), INT2 is placed into level mode: The INT2 is asserted
     are described in the specific sections where INT1 and          when data is available and remains asserted until the
     INT2 are used. The following provides a summary of the         host reads STATUS0 register.
     INT1 and INT2 usage. If syncSmpl = 0, then bit 1 of            The device continues to refresh the output data until the
     STATUSINT register will have the same value as INT1            STATUS0 register is read by host.
     and bit 0 of STATUSINT register will have the same
     value as INT2.                                                 Once the STATUS0 is read by host the QMI8658C will
                                                                    deassert INT2 and stop refreshing the output data.
                                                                    Once the host detects INT2 has been deasserted it can
     6.1.1     Interrupt 1 (INT1)                                   start reading the output data.
     The following summarizes the use of INT1:
                                                                    Once the last byte of data has been read by the host
     Set high for ~4 ms after reset to indicate that the chip is    (the QMI8658C keeps track) the QMI8658C will start
     ready for normal operation.                                    updating the output register and set up the next INT2
     If any operation has set INT1 it will always be cleared by     when data is available in the output registers.
     reading STATUS1 register.                                      FIFO Enabled Mode (see Section 8)
     Used as part of the CTRL9 handshake protocol (see              When the FIFO is enabled in the FIFO mode (the mode
     section5.9).                                                   bits in FIFO_CTRL register set to 01), INT2 is asserted
     When Wake on Motion (WoM) is enabled, INT1 can be              when the FIFO is full or when the watermark is reached.
     selected to indicate WoM (see section 9).                      When the FIFO is enabled in the Streaming Mode (the
     INT1 can be used for motion detection event interrupt if       mode bits in FIFO_CTRL register set to 10), INT2 is
     CTRL8.bit is configured to 1, this bit will influence the      asserted when the watermark is reached but not when
     any/no/sig-motion, pedometer, tap detection interrupt.         the FIFO is full because in the stream mode the FIFO
                                                                    will continue to fill by overwriting the oldest data in the
                                                                    FIFO.
     6.1.2     Interrupt 2 (INT2)
                                                                    INT2 is cleared in both the FIFO Mode and the
     INT2 generally indicates data availability.
                                                                    Streaming Mode by clearing the FIFO_rd_mode bit in
     When Wake on Motion (WoM) is enabled, INT2 can be              the FIFO_CTRL register. This is done as part of the
     selected to indicate WoM (see section 9).                      CTRL9 command CTRL_CMD_REQ_FIFO.
     INT2 can be used for motion detection event interrupt if       Accelerometer and Gyroscope Self Test Modes (see
     CTRL8.bit is configured to 0, this bit will influence the      Section 11)
     any/no/sig-motion, pedometer, tap detection interrupt.
                                                                    INT2 is asserted to indicate availability of self-test data
     The source of interrupts will act with below interrupt in
                                                                    and is cleared by resetting the aST and gST bits in
     logic-OR.
                                                                    CTRL2 and CTRL3 registers, respectively.
     The following indicates when INT2 will be asserted:
     Register-Read Mode (FIFO Bypass Mode)
     In Register-Read mode the accelerometer and
     gyroscope data are available in the Sensor Data Output
     registers (A[X,Y,Z]_[H,L]). The updating of these output
     registers and the functionality of the INT2 interrupt is
     controlled by the syncSmpl bit as described below.
     With syncSmpl = 0 (refer to Table 26, CTRL7 register bit
     7), INT2 is placed into edge trigger mode: the Sensor
     Data Output Registers are updated at the Output Data
     Rate (ODR), and INT2 is pulsed at the ODR. A rising
     edge on INT2 indicates that data is available and INT2
     is cleared automatically after a short duration. It is the
     responsibility of the host to detect the rising edge and to
     latch the data before the next sample occurs. Note that
     the INT2 pulse width is dependent on the ODR and the
     sensor. It is not recommended to depend on the level to
     determine if INT2 has occurred.

© 2022 QST Corporation                                        QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                   44
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                     QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       7 Operating Modes
     The QMI8658C offers a large number of operating              Table 34 and are shown in Figure 11; they may be
     modes that may be used to operate the device in a            configured using the control (CTRL) registers.
     power efficient manner. These modes are described in
     Table 34. Operating Modes

                Mode                                 Description                              Suggested Configuration
     Sensor Modes
                                                                                              CTRL1 sensorDisable = 0
                              All sensors off, clock is turned on. The current in this mode
                                                                                              CTRL7 aEN = 0, gEN = 0,
         Power-On Default     is typically 50 µA. Note this mode is the default state upon
                                                                                              mEN = 0, sEN=0.
                              initial power up or after a reset.
                                                                                              CTRL2 aODR =000
                              Same as Power-On Default mode, except in this mode the          CTRL1 sensorDisable =0
                              250 kHz clock is turned on instead of the 2 MHz clock. The      CTRL7 aEN = 0, gEN = 0,
             Low Power
                              current in this mode is typically 25 µA. To enter this mode     mEN = 0, sEN=0.
                              requires host interaction to set CTRL2 aODR=11xx.               CTRL2 aODR =11xx
                              All QMI8658C functional blocks are switched off to minimize
                              power consumption. Digital interfaces remain on allowing
                                                                                              CTRL1 sensorDisable =1
                              communication with the device. All configuration register
            Power-Down                                                                        CTRL7 aEN = 0, gEN = 0,
                              values are preserved, and output data register values are
                                                                                              mEN = 0, sEN=0.
                              maintained. The current in this mode is typically 20 µA. The
                              host must initiate this mode by setting sensorDisable=1.
                                                                                              CTRL7 aEN =1, gEN =0,
        Normal Accel Only     Device configured as an accelerometer only.                     mEN =0
                                                                                              CTRL2 aODR !=11xx
                                                                                              CTRL7 aEN =1, gEN =0,
      Low Power Accel Only    Device configured in low power accelerometer mode.              mEN =0
                                                                                              CTRL2 aODR =11xx
                              Device configured as gyroscope Drive only, since the Sense
                                                                                          CTRL7 gSN=1, aEN =0, gEN
            Snooze Gyro       is not enabled, there is no data from the gyroscope in this
                                                                                          =1, mEN =0
                              mode.
                                                                                              CTRL7 gSN=0, aEN =0, gEN
             Gyro Only        Device configured as a gyroscope only.
                                                                                              =1, mEN =0
                                                                                              CTRL7 aEN =0, gEN =0,
              Mag Only        Device configured as a magnetometer only.
                                                                                              mEN =1
                              Device configured as an accelerometer and magnetometer          CTRL7aEN =1, gEN =0, mEN
            Accel + Mag       combination only. Device can be used as a (stabilized)          =1
                              compass.                                                        CTRL2 aODR != 11xx
                                                                                              CTRL7 gSN=0, aEN =1, gEN
                              Device configured as an Inertial Measurement Unit, i.e. an      =1, mEN =0
        Accel + Gyro (IMU)
                              accelerometer and gyroscope combination sensor.
                                                                                              CTRL2 aODR != 11xx
                              Accelerometer and gyroscope are enabled and combined            CTRL7 gSN=0, aEN =1, gEN
        Accel + Gyro + Mag    with an external magnetometer and the device can be used        =1, mEN =1
              (9DOF)          as a 9D orientation sensor (Attitude and Heading
                              Reference).                                                     CTRL2 aODR != 11xx

                                                                                              CTRL7 gSN=1, aEN =1, gEN
                              Accelerometer and gyroscope snooze are enabled. Only            =1, mEN =0
       Accel + Snooze Gyro
                              accelerometer data is available.
                                                                                              CTRL2 aODR != 11xx
                                                                                              CTRL7 gSN=1, aEN =1, gEN
      Accel + Mag + Snooze    Accelerometer and gyroscope snooze are enabled. Only            =1, mEN =1
              Gyro            accelerometer and magnetometer data are available.
                                                                                              CTRL2 aODR != 11xx
                              Very low power mode used to wake-up the host by providing
                              an interrupt upon detection of device motion.
                                                                                              CTRL7 aEN =1, gEN =0,
     Wake on Motion (WoM)                                                                     mEN =0
                              WoM Mode enabled - see                                          CTRL2 aODR = 11xx
                              CTRL_CMD_WRITE_WOM_SETTING in Section 5.9.5 and
                              see Section 9, Wake on Motion (WoM)

© 2022 QST Corporation                                     QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                45
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                 QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     Table 34 Operating Modes (Continued)

                Mode                               Description                            Suggested Configuration
     Sensor Modes
                Reset        Software reset asserted
              No Power       VDDIO and VDD low
     AttitudeEngine Modes
                             Attitude Engine Mode with Accelerometer and Gyroscope.       CTRL7 aEN = 1, gEN = 1, sEN
       6DOF AttitudeEngine                                                                =1
                             Note that velocity increments and orientation (quaternion)
             Mode            increments will be output rather than sensor values.         CTRL2 aODR=0xx
                                                                                          CTRL7 aEN = 1, gEN = 1,
                             AttitudeEngine Mode with Accelerometer, Gyroscope, and       sEN = 1,
       9DOF AttitudeEngine   Magnetometer. Note that velocity increments, orientation     mEN = 1
             Mode            (quaternion) increments and magnetic field values will be
                             output rather than sensor values.                            CTRL4 (configure
                                                                                          magnetometer as needed)
                                                                                          CTRL7 aEN = 1, gEN = 1, sEN
        Motion On Demand     This mode allows Host to sample AttitudeEngine data          =1
              Mode           asynchronously by polling.
                                                                                          CTRL6 sMOD = 1




© 2022 QST Corporation                                   QMI8658C • Rev 0.9                                  www. qstcorp.com
                                                                                                                            46
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor


                            Figure 11. Operating Mode Transition Diagram




© 2022 QST Corporation                         QMI8658C • Rev 0.9           www. qstcorp.com
                                                                                           47
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                          QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       7.1     General Mode Transitioning
                                                                  ▪    Time t0 is the System Turn on Time and is 150ms
     Upon exiting the No Power state (i.e. on first applying           seconds. This time only needs to be done once,
     power to the part) or exiting a Software Reset state, the         upon transitioning from either a No Power or Power
     part will enter the Power-On Default state. From there,           Down state, or whenever a reset is issued, which
     the sensor can be configured in the various modes                 should not be done unless the intent is to have the
     described in Table 34 and as shown in Figure 11. The              device to go through its entire boot sequence (see
     figure illustrates the timing associated with various             the specification System Turn On Time in both
     mode transitions, and values for these times are given            Table 7 and Table 8).
     in the section below and in Table 7 and Table 8.
                                                                  ▪    The Gyro Turn on Time (see Table 8) is comprised
                                                                       of t1 (the gyroscope wakeup time) and t5 (the part’s
       7.2     Transition Times                                        filter settling time). t1 is typically 60 ms and t5 is
     The time it takes for data to be present after a mode             defined as 3/ODR, where ODR is the output data
     switch will vary and depends on which mode has been               rate in Hertz.
     selected. For example, the time it takes for retrieving      ▪    The Accel Turn on Time (see Table 7) is comprised
     data from the accelerometer after a mode switch is less           of t2 (the accelerometer wakeup time) and t5 (the
     than any mode that involves the gyroscope. The times              part’s filter settling time). t2 is typically 3 ms, and t5
     t1, t2, t3 and t4, are defined as the time it takes from          is defined as 3/ODR, where ODR is the output data
     INT2 going high to data being present. The time, t5 is            rate in Hertz.
     the time it takes to have a correct representation of the
     inertial state. t5 is variable and is associated with the    ▪    Time t3 is the magnetometer wakeup time, which is
     user selected Output Data Rate (ODR). We have                     typically 12 ms. Transitioning from the Power-On
     defined t5 = (3/ODR) to generally represent that time.            Default state to a Mag Only state or a Mag + Accel
                                                                       state takes the time t3 + t5, where t5 is defined as
     t6 is the time it takes to go from a sensor powered state         3/ODR, where ODR is the output data rate in Hertz.
     to a state where the sensors are off. This time depends
     on the Output Data Rate (ODR) and ranges from 1/ODR          ▪    The t7 transition is dependent on data transfer rates
     to 2/ODR.                                                         and is for I2C at 400 kHz is <100 µs for SPI at
                                                                       11 Mbps is around 40 µs.
     t7 is the transition time between various states where
     the sensors are off.                                         ▪
     t0 is the System Turn On Time, and is the time to enter
     the Power-On Default state from Software Reset, No
     Power, or Power down.




© 2022 QST Corporation                                      QMI8658C • Rev 0.9                                        www. qstcorp.com
                                                                                                                                     48
           ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                                         QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       8 FIFO Description
       8.1        Using the FIFO                                                      Reading Sensor Data from FIFO
                                                                                      Sensor data is read from the FIFO through the following
     The QMI8658C contains a programmable 1536-byte                                   command sequence. (For additional information, see
     data buffer, which can be used as a FIFO buffer. The                             CTRL9 description).
     FIFO’s operating mode and configuration are set via the
     FIFO_CTRL register. FIFO data may consist of                                     ▪    Request access to FIFO data buffer by sending
     gyroscope and accelerometer data and is accessible via                                CTRL9 command 0x0D. This automatically sets
     the serial interfaces. The FIFO also supports burst                                   FIFO_rd_mode bit to 1 in FIFO_CTRL.
     reads. The host must complete its burst read prior to the
     next sensor data period. This time period is defined by                          ▪    Read FIFO_DATA register to empty the FIFO.
     the ODR selected. Depending on how many sensors                                  ▪   After FIFO is emptied, set FIFO_rd_mode bit to 0.
     are enabled, the host will need to read increments of 6,
                                                                                      Note that when only the accelerometer or gyroscope is
     12 or 18 bytes, corresponding to one, two and three
                                                                                      enabled, the sensor data format at the host interface is:
     sensors active at the same time. This feature helps
     reduce overall system power consumption by enabling                              AX_L[0]AX_H[0]AY_L[0]AY_H[0]AZ_L[
     the host processor to read and process the sensor data                           0]AZ_H[0]AX_L[1]…
     in bursts and then enter a low-power mode. The
     interrupt function may be used to alert when new data is                         When 2 sensors are enabled, the sensor data format is:
     available.                                                                       AX_L[0]AX_H[0]AY_L[0]AY_H[0]
                                External Magnetomer
         Accel X, Y, Z ADC
                                       X, Y, Z
                                                            Gyro X, Y, Z ADC          AZ_L[0]AZ_H[0]GX_L[0]GX_H[0]

                                    I2C Master I/F
                                                                                      GY_L[0]GY_H[0]GZ_L[0]GZ_H[0]

           Accel Internal          Magnetometer              Gyro Internal
                                                                                      AX_L[1]AX_H[1]…
         Sampling Registers      Internal Sampling         Sampling Registers
           Digital Filters                                   Digital Filters
                                                                                      When 3 sensors are enabled, the sequence will be
                                                                                      extended to include the 6 corresponding magnetometer
                                                                                      samples.

                                                                                      Bypass Mode
                                                                                      In Bypass mode (set in FIFO_CTRL), the FIFO is not
                                        FIFO
                                    (1536 Bytes)
                                                                                      operational and, therefore, remains empty. Sampled
                                                                                      data from the gyroscope and/or Accelerometer are
                                                                                      stored directly in the Sensor Data Output Registers.
                                                                                      When new data is available, the old data is over-written.
                                 FIFO Read Control
                                       Logic
                                                                                      FIFO Mode
                                                                                      In FIFO mode, data from the sensors are stored in the
                                Host (SPI, I2C, or I3C)
                                                                                      FIFO. The watermark interrupt, if enabled in
                              Figure 12.             FIFO Data Flow                   FIFO_CTRL, is triggered when the FIFO is filled to the
                                                                                      level specified by the value of wtm<1:0> in the
     The FIFO size is configured using the FIFO_CTRL
                                                                                      FIFO_CTRL register. The FIFO continues filling until it is
     register. When the FIFO is enabled for two or more
                                                                                      full. When full, the FIFO stops collecting data from the
     sensors, as is true for all modes that have multiple
                                                                                      input channels. Data collection restarts when FIFO is
     sensors active, the sensors must be set at the same
                                                                                      emptied.
     Output Data Rate (ODR).
     The FIFO is read through the I3C/I2C/SPI interface by                            Streaming Mode
     reading the FIFO_DATA register. Any time the Output                              In Streaming mode (set in FIFO_CTRL), data from the
     Registers are read, data is erased from the FIFO                                 gyroscope and accelerometer are stored in the FIFO. A
     memory.                                                                          watermark interrupt can be enabled and set as in FIFO
                                                                                      mode. The FIFO continues filling until full. In this mode,
     The FIFO has multiple operating modes: Bypass, FIFO,                             the FIFO acts as a circular buffer, when full, the FIFO
     and Streaming. The operating modes are set using the                             discards the older data as the new data arrives.
     mode<1:0> bits in the FIFO_CTRL register.                                        Programmable watermark level events can be enabled
     Enabling FIFO                                                                    to generate dedicated interrupts on the DRDY/INT2 pin
                                                                                      (configured through the FIFO_CTRL register).
     The FIFO is configured by writing to the FIFO_CTRL
     register and is enabled after the accelerometer and/or
     gyroscope are enabled. If the watermark function is
     enabled in the FIFO_CTRL register, pin INT2 is
     asserted when the FIFO watermark level is reached.


© 2022 QST Corporation                                                          QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                                                    49
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                 QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       8.2     FIFO Register Description
     Table 35. FIFO Registers Description

              Register Name
     FIFO_WTM_TH                   FIFO Watermark Threshold. Register Address: 19 (0x13)
       Bits                Name    Default                                    Description
       7:0     FIFO_wtm_th          1’b0     Set watermark level, in ODRs.
     FIFO_CTRL                     Configure FIFO. Register Address: 20 (0x14)
       Bits                Name    Default                                    Description
                                             0: Disable FIFO read via FIFO_DATA register.
        7      FIFO_rd_mode         1’b0     1: FIFO read via FIFO_DATA register is enabled. This bit is automatically
                                             set by the CTRL9 command to request the FIFO.
       6:4     Reserved             3’b0     Reserved
                                             Set FIFO size. (See 8.1 for more details.)
                                             00 – Set FIFO size at 16 samples for each enabled sensor
                                             01 – Set FIFO size at 32 samples for each enabled sensor
       3:2     size<1:0>            2’b0     10 – Set FIFO size at 64 samples for each enabled sensor
                                             11 – Set FIFO size at 128 samples for each enabled sensor (up to 2
                                             sensors enabled only)
                                             Set FIFO Mode.
                                             00 – Bypass (FIFO disable).
       1:0     mode<1:0>            1’b0     01 – FIFO.
                                             10 – Streaming.
                                             11 – Not Used
     FIFO_SMPL_CNT                 FIFO Sample Count. Register Address: 21 (0x15)
       Bits                Name    Default                                    Description
       7:0     fifo_smpl_cnt_lsb    8’h00    The LS 8 bits of FIFO sample count, in bytes.
     FIFO_STATUS                   FIFO Status. Register Address: 22 (0x16)
       Bits                Name    Default                                    Description
        7      fifo_full            1’b0     FIFO size has been reached and is full.
        6      wtm                  1’b0     Watermark level hit.
                                             FIFO over-flow condition has occurred. An attempt was made to save new
        5      overflow             1’b0
                                             data to the FIFO while it was full.
        4      not_empty            1’b0     FIFO not empty.
       3:2     reserved             2’b0

       1:0     fifo_smpl_cnt_msb    2’b0     The MS 2 bits of FIFO sample count, in bytes.

     FIFO_DATA                     FIFO Data Register. Register Address: 23 (0x17)

       Bits    Name                Default                                    Description

       7:0     data<7:0>            8’b0     Read this register to read sensor data out of FIFO.




© 2022 QST Corporation                                   QMI8658C • Rev 0.9                                  www. qstcorp.com
                                                                                                                            50
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                            QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     9 Wake on Motion (WoM)
       9.1     Wake on Motion Introduction
                                                                       9.3    Wake on Motion Event
     The purpose of the Wake on Motion (WoM) functionality
     is to allow a system to enter a low power sleep state          When a Wake on Motion event is detected the
     while the system is static and then to automatically           QMI8658C will set bit 2 (WoM) in the STATUS1 register.
     awaken when moved. In this mode the system should              Reading STATUS1 by the host will clear the WoM bit
     use very little power, yet still respond quickly to motion.    and will reset the chosen interrupt line (INT1 or INT2,
                                                                    see previous section) to the value given by the WoM
     It is assumed that the system host processor is                interrupt initial value (see previous section).
     responsible for configuring the QMI8658C correctly to
     place it into Wake on Motion mode, and that the system         For each WoM event, the state of the selected interrupt
     host processor will reconfigure the QMI8658C as                line is toggled. This ensures that while the system is
     necessary following a WoM interrupt.                           moved, the host processor will receive wakeup
                                                                    interrupts regardless of whether it uses high, low,
     Wake on Motion is configured through the CTRL9                 positive- or negative-edge interrupts.
     command     interface      (see   write-up  for
     CTRL_CMD_WRITE_WOM_SETTING in Section 5.9.5                    The QMI8658C stays in WoM mode until commanded to
     CTRL9 Commands in Detail).                                     enter a new mode by the host processor.

     Table 36. Registers used for WoM
                                                                       9.4    Configuration Procedure
     Register (bits)                   Function                     The host processor is responsible for all configurations
                         WoM Threshold: absolute value in           necessary to put the QMI8658C into WoM mode. The
                         mg (with 1mg/LSB resolution)               specific sequence of operations performed by the host
     CAL1_L (0:7)                                                   processor to enable WoM is shown in Figure 13.
                         0x00 must be used to indicate that
                         WoM mode is disabled
                                                                                       Disable sensors. (Write 0x00
                         WoM interrupt select                                                   to CTRL7)
                         01 – INT2 (with initial value 0)
                         11 – INT2 (with initial value 1)
     CAL1_H (7:6)

                         00 – INT1 (with initial value 0)                               Set Accelerometer sample
                                                                                       rate and scale (Write CTRL2)
                         10 – INT1 (with initial value 1)
                         Interrupt blanking time (in number of
     CAL1_H (0:5)
                         accelerometer samples)
                                                                                       Set Wake on Motion (WoM)
                                                                                           Threshold in CAL1_L;
     The threshold value is configurable to make the amount                            select interrupt, polarity and
     of motion required to wake the device controllable by                               blanking time in CAL1_H
     the host application. The special threshold value of 0x00
     can be used to disable the WoM mode, returning the
     interrupt pins to their normal functionality.
                                                                                        Execute CTRL9 command to
     The interrupt initial value (1 or 0) and the interrupt pin                            configure WoM mode
     used for signaling (INT1 or INT2) are selectable to make
     it easy for system integrators to use the WoM motion
     mode to wake the host processor from its deepest sleep
     level. Using the lowest power mode on many
                                                                                       Set Accelerometer enable bit
     microcontrollers requires the use of special wake up                                        in CTRL7
     pins that may have only a single polarity setting, and
     thus may not be useable for other special purposes
                                                                                   Figure 13. WoM Configuration
     such as timer captures.
                                                                                       Commands and Sequence
     The interrupt blanking time is a programmable number
                                                                    The WoM bit is cleared upon setting the WoM threshold
     of accelerometer samples to ignore when starting WoM
                                                                    to a non-zero value, and the selected interrupt pin is
     mode so that no spurious wake-up events are
                                                                    configured according to the settings. Special care has
     generated by startup transients.
                                                                    been taken that the WoM interrupt does not activate due
       9.2     Accelerometer Configuration                          to any transients when the accelerometer is first
                                                                    enabled. An interrupt blanking time is included that
     For additional tuning of the WoM responsiveness, the           prevents such spurious interrupts to propagate.
     precise configuration of the accelerometer is left to the
     host. This gives the host processor the ability to
     program the desired sample rate and full-scale range.
© 2022 QST Corporation                                        QMI8658C • Rev 0.9                                        www. qstcorp.com
                                                                                                                                       51
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                       QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       9.5     Wake on Motion Control                                9.6    Exiting Wake on Motion Mode
               Registers                                          To exit WoM mode the host processor must first clear
     The WoM configuration is controlled by values written to     CTRL7 to disable all sensors, and then write a threshold
     the CAL1_x registers, as shown in Table 36.                  value of 0x0 for the WoM Threshold (see Table 36,
                                                                  Registers used for WoM) and execute the WoM
                                                                  configuration CTRL9 command (see write-up for
                                                                  CTRL_CMD_WRITE_WOM_SETTING in Section 5.9.5
                                                                  CTRL9 Commands in Detail). On doing this the interrupt
                                                                  pins will return to their normal function. After zeroing the
                                                                  WoM Threshold the host processor may proceed to
                                                                  reconfigure the QMI8658C as normal, as in the case
                                                                  following              a            reset             event.




                         Figure 14.   WoM Example Diagram




© 2022 QST Corporation                                      QMI8658C • Rev 0.9                                     www. qstcorp.com
                                                                                                                                  52
           ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                             QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                                                          c-    Wait time equals to or               higher    than
          10 Locking Mechanism                                                  data_read_delay (refer to 10.3).
     Locking Mechanism function can lock the sensor data
                                                                          d-    At this time, the data will be locked.
     and keep the values in data registers after the proper
     locking process, similar to the “shadow register”, which             e-    Read all sensor data.
     enables host to read the locked data in unlimited delay
     without the risk of mixing the two consecutive data if               f-    When reading the last byte of data (GZ_H if
     reading happens at the time that the new data come                         gyro is enabled, or AZ_H if accel only is
     and updating to the registers.                                             enabled), the lock will be cleared.
                                                                          g-    To read next batch of data repeat steps 2 & 3.
                                                                     4-    To disable the sensor write 0x00 to CTRL7.
     10.1 Set Locking Mechanism                                            (Enable back the AHB clock gating).
     The locking Mechanism is set when setting CTRL7.bit7
     to “1” (syncSmpl).
     Examples:                                                       10.3 Data_Read_Delay
     1- Enabling 6DOF in this mode:                                  When the gyro is enabled the value of data_read_delay
                                                                     is as follow:
          write 0x83 to CTRL7.
                                                                      ODR setting        ODR(Hz)        data_read_delay (usec)
     2- Enable Accel Only in this mode:
                                                                               0           7520                     2
           write 0x81 to CTRL7.
                                                                               1           3760                     2
     After Enabling the sensor(s), the user needs to poll
     STATUSINT register before reading the sensor data for                     2           1880                     4
     synchronization, refer to 10.2 for more information.
                                                                               3            940                     6
                                                                               4            470                    12
     Note: When using SPI (accel only mode with ODR less
     than 500Hz), I2C or I3C interfaces (in all ODRs), The                     5            235                    12
     user needs to disable the internal AHB clock gating by                    6           117.5                   12
     applying:
                                                                               7           58.75                   12
     1- write 0x01 to CAL1_L register.
                                                                               8          29.375                   12
     2- write 0x12(CTRL_CMD_AHB_CLOCK_GATING) to
     CTRL9 Register, follow the CTRL9 process.
     After disabling the sensor, enable back the clock gating        When the gyro is not enabled (accel only mode) the
     by:                                                             value of data_read_delay is as follow:
     1-    write 0x00 to CAL1_L register.                             ODR setting        ODR(Hz)        data_read_delay (usec)
     2-    write    0x12  to    CTRL9      Register                            3           1000                     6
           (CTRL_CMD_AHB_CLOCK_GATING), follow the
           CTRL9 process.                                                      4            500                    12
                                                                               5            250                    24
                                                                               6            125                    48
     10.2 Reading sensor data
                                                                               7            62.5                   48
     An example process of reading sensor data in locking
     mechanical mode is shown below:                                           8           31.25                   48
     1-    Enable the sensor based on description in 10.1                      12           128                    40
           (Disable the AHB clock gating if needed)
                                                                               13            21                    100
     2-    Poll STATUSINT register:
                                                                               14            11                    200
          a-   Wait poll delay time.
                                                                               15            3                     270
          b-   Read STATUSINT register.
     If the read value is not (0x01 or 0x03), repeat step 2.
     If the value is (0x01 or 0x03) continue onto step 3.
     3-    Read data:


© 2022 QST Corporation                                         QMI8658C • Rev 0.9                                        www. qstcorp.com
                                                                                                                                        53
               ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                          QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     10.4 On-The-Fly ODR changing
     The on-the-fly ODR changing is supported, so host can
     change the ODR of sensor without disable the sensor.
     An example sequence of change ODR without disable
     the sensor in locking mechanism is shown below:
     1-        Write CTRL2/CTRL3 to set the ODR’s                of
               accelerometer and gyroscope and full scales.
     2-        Write 0x83 (or 0x82) to CTRL7.
     3-        Read Sensor Data according 10.2.
     4-        Changing ODR on the fly:
          a-     Write 0x02 (or 0x03) to CTRL7(clear the
                 syncSmpl bit).
          b-     Wait 700us.
          c-     Clear the lock in case if the data is still locked
                 from previous ODR by reading GZ_H if
                 gyroscope is enabled or AZ_H if accelerometer
                 only is enabled.
          d-     Write CTRL2 / CTRL3 with the new ODR’s.
          e-     Write 0x83 (or 0x82) to CTRL7.
     5-        Start poll and read Sensor Data using the new
               ODRs based on 10.2.
     6-        The new data will be stable in about 3~5 samples,
               so it is recommended to through away the first
               several samples at host side.




© 2022 QST Corporation                                           QMI8658C • Rev 0.9   www. qstcorp.com
                                                                                                     54
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                     QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       11 Performing Device Self Test

       11.1 Accelerometer Self Test
     The accelerometer Self Test is used to determine if the         11.2 Gyroscope Self Test
     accelerometer is functional and working within
     acceptable parameters. It is implemented by applying         The gyroscope Self Test is used to determine if the
     an electrostatic force to actuate each of the three X, Y,    gyroscope is functional and working within acceptable
     and Z axis of the accelerometer. If the accelerometer        parameters. It is implemented by applying an
     mechanical structure responds to this input stimulus by      electrostatic force to actuate each of the three X, Y, and
     sensing at least 200 mg, then the accelerometer can be       Z axis of the gyroscope and measures the mechanical
     considered functional within acceptable parameters.          response on the corresponding X, Y, and Z axis. If the
     The accelerometer Self Test data is available to be read     equivalent magnitude of the gyroscope output is greater
     at registers dVX_L, dVX_H, dVY_L, dVY_H, dVZ_L and           than 300dps for each axis, the gyroscope can be
     dVZ_H. The Host can initiate the Self Test at anytime by     considered as functional within acceptable parameters.
     using the following procedure.                               The gyroscope Self Test data is available to be read at
                                                                  output registers dVX_L, dVX_H, dVY_L, dVY_H, dVZ_L
                                                                  & dVZ_H. The Host can initiate the Self Test anytime by
     Procedure for accelerometer Self Test:                       using the following procedure.
     1- Make sure that the sensor is disabled. (CTRL7 =
     0x00).                                                       Procedure for gyroscope Self Test:
     2- Set the bit aST to 1. (CTRL2.bit7 = 1’b1)                 1- Make sure that the sensor is disabled. (CTRL7 =
         The 16g Full Scale is always used for Accel Self         0x00).
     Test, regardless to the aFS settings in CTRL2.               2- Set the bit gST to 1. (CTRL3.bit7 = 1’b1).
          The ODR setting in CTRL2 will be used for the                The 2048dps Full Scale and 1 KHz ODR is always
     Accel Self Test functionality.                               used for gyroscope Self Test. The Full Scale and ODR
     3- Wait for QMI8658C to drive INT2 to “1”.                   portion in CTRL3 are ignored.
     4-    Disable the Accel Self Test by clearing aST bit in     3- Wait for QMI8658C to drive INT2 to “1”.
     CTRL2. (CTRL2.bit7 = 1’b0)                                   4-     Disable the Gyro self test by clearing gST bit in
     5- Wait for QMI8658C drive INT2 back to “0”.                 CTRL3. (CTRL2.bit7 = 1’b0)
     6- Read the Accel Self Test result:                          5- Wait for QMI8658C drive INT2 back to “0”.
          X channel: dVX_L and dVX_H (registers 81 and            6- Read the Gyro Self Test result:
     82).                                                         X channel: dVX_L and dVX_H (registers 81 and 82).
          Y channel: dVY_L and dVY_H (registers 83 and            Y channel: dVY_L and dVY_H (registers 83 and 84).
     84).
                                                                  Z channel: dVZ_L and dVZ_H (registers 85 and 86).
          Z channel: dVZ_L and dVZ_H (registers 85 and
     86).                                                         Read the 16 bits result in format (signed 12.4) from the
                                                                  according registers of X, Y & Z channels.
          Read the 16 bits result in format (signed 5.11) from
     the according registers of X, Y & Z channels.                If the absolute results of all three axes are higher than
                                                                  300dps, the gyroscope can be considered functional.
          If the absolute results of all three axes are higher    Otherwise, the gyroscope cannot be considered
     than 200mg, the accelerometer can be consider                functional.
     functional. Otherwise, the accelerometer cannot be
     consider functional.
                                                                  Here is an example of running gyroscope Self Test.
     Here is an example of running accelerometer Self Test.       1- Write 0x00 to CTRL7.
     1- Write 0x00 to CTRL7.                                      2- Wait 1 msec.
     2- Wait 1 msec.                                              3- Write 0x83 to CTRL3 (enable the gyroscope Self
                                                                  Test).
     3- Write 0x83 to CTRL2 (enable the Accel Self Test, and
     set 1KHz ODR).                                               4- Wait for INT2 is set to “1”.
     4- Wait for INT2 is set to “1”.                              5- Write 0x03 to CTRL3(disable the gyroscope Self
                                                                  Test).
     5- Write 0x03 to CTRL2 (disable the Accel Self Test).
                                                                  6- Wait for INT2 to be cleared to “0”.
     6- Wait for INT2 to be cleared to “0”.
                                                                  7- Read final result from registers 81 up to 86 and
     7- Read final result from registers 81 up to 86 and          compare.
     compare.


© 2022 QST Corporation                                      QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                                55
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     12 Host Serial Interface
     QMI8658C Host Serial Interface supports MIPI I3C, I2C         ▪    Data should change on falling edge of clock
     and SPI slave interfaces. For SPI, it supports both 3-
     wire and 4-wire modes. The basic timing characteristics       ▪    Maximum frequency is 15 MHz
     for the interface are described below. Through the            ▪    Data is delivered MSB first
     QMI8658C Host Serial Interface, the host can access,
     setup and control the QMI8658C Configuration                  ▪    Support single read/writes and multi cycle (Burst)
     Registers (see Table 26).                                          read/writes. NOTE: burst writes to Configuration
                                                                        registers are NOT supported. These registers
                                                                        should be written in single cycle mode only.
         12.1 Serial Peripheral Interface (SPI)
                                                                   ▪    Supports 6-bit Address format and 8-bit data format
     QMI8658C supports both 3-wire and 4-wire modes in
     the SPI slave interface. The SPI 4-wire mode uses two         ▪
     control lines (CS, SPC) and two data lines (SDI, SDO).
     The SPI 3-wire mode uses the same control lines and
     one bi-directional data line (SDIO). The SDI /SDIO pin is
     used for both 3- and 4-wire modes and is configured
     based on the mode selected. The SPI interface has
     been validated at 15 MHz and the timing parameters are
     measured at that interface frequency.
     SPI transactions can be done in either Mode 0
     (CPOL=0, CPHA=0) or Mode 3 (CPOL=1, CPHA=1).
     The interface automatically detects which mode is in
     use and configures clocking accordingly.
                                                                        Figure 15.   SPI Address and Data Format
     SPI 3- or 4-wire modes are configured by writing to bit-7
     of CTRL1 register. 3-wire mode is selected when bit-7 is
     1. The default configuration is 4-wire mode, i.e. bit-7 of
     CTRL1 is 0.
     Figure 15 shows the SPI address and data formats.

     SPI Features
     ▪    Data is latched on the rising edge of the clock




              Figure 16.   Typical SPI 4-Wire Multi-Slave                   Figure 17. Typical SPI 3-Wire Multi-Slave


     In a typical SPI Master/Slave configuration the SPI           is driven by the master with both address and data
     master shares the SPI clock (SPC), the serial data input      when it is configured for write mode. During read mode,
     (SDI), and the Serial Data Output (SDO) with all the          the SDIO line is driven by the master with the address,
     connected SPI slave devices. Unique Chip Select (CS)          and subsequently driven by the “addressed” slave with
     lines connect each SPI slave to the master.                   data.
     Figure 16 and Figure 17 show typical multi-slave 4- and       Figure 18 and Figure 19 illustrate the waveforms for
     3-wire configurations. The primary difference between         both 4-wire and 3-wire SPI read and write transactions.
     the two configurations is that the SDI and SDO lines are      Note that CS is active during the entire transaction.
     replaced by the bi-directional SDIO line. The SDIO line




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                   www. qstcorp.com
                                                                                                                                 56
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                      QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                                SPI : Mode 0




                                                SPI : Mode 3

                         Figure 18.   SPI 4-Wire Single Byte Read and Write (Mode 0 and Mode 3)




© 2022 QST Corporation                            QMI8658C • Rev 0.9                              www. qstcorp.com
                                                                                                                 57
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                              SPI : Mode 0




                                              SPI : Mode 3


                           Figure 19.   SPI 4-Wire Multi-Byte Read and Write Transactions




© 2022 QST Corporation                          QMI8658C • Rev 0.9                          www. qstcorp.com
                                                                                                           58
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                              SPI: Mode 0




                                              SPI : Mode 3

                          Figure 20.   SPI 3-Wire Single Byte Read and Write Transactions




© 2022 QST Corporation                          QMI8658C • Rev 0.9                          www. qstcorp.com
                                                                                                           59
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                              SPI : Mode 0




                                              SPI : Mode 3

                           Figure 21.   SPI 3-Wire Multi-Byte Read and Write Transactions




© 2022 QST Corporation                          QMI8658C • Rev 0.9                          www. qstcorp.com
                                                                                                           60
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                        QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
     12.1.1 SPI Timing Characteristics
     The typical operating conditions for the SPI interface are provided in Table 37. Please refer to Table 5 for the VIL, VIH,
     VOL, VOH definition to define the rising and falling edge condition of the timing symbols.
     VDDIO = 1.8 V, T = 25°C unless otherwise noted.
     Table 37. SPI Interface Timing Characteristics

         Symbol                                  Parameter                                  Min.         Max.         Unit
            tSPC         SPI Clock Cycle                                                     66.6                       ns
            fSPC         SPI Clock Frequency                                                               15         MHz
            tsCS         CS Setup Time                                                        6                         ns
            thCS         CS Hold Time                                                         8                         ns
            tsSDI        SDI Input Setup Time                                                 5                         ns
            thSDI        SDI Input Hold Time                                                  15                        ns
           tvSDO         SDO Time for Valid Output                                                         50           ns
           thSDO         SDO Hold Time for Output                                             9                         ns
           tdSDO         SDO Disable Time for Output                                                       50           ns
           tsSDIO        SDIO Address Setup Time                                              5                         ns
           thSDIO        SDIO Address Hold Time                                               15                        ns
           tvSDIO        SDIO Time for Valid Data                                                          50           ns
          tczSDIO        SDIO Time from SPC to High Z                                                      50           ns
           tzSDIO        SDIO Time from CS to High Z                                                       50           ns




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                                     www. qstcorp.com
                                                                                                                                   61
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                     QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                               SPI : Mode 0




                                               SPI : Mode 3

                          Figure 22.   Timing Characteristics for SPI 3- and 4-Wire Interfaces




© 2022 QST Corporation                           QMI8658C • Rev 0.9                              www. qstcorp.com
                                                                                                                62
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                        QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       12.2 I2C Interface                                           During the slave register address phase bit-7 of the
                                                                    address is used to enable auto-increment of the target
     Table 38 provides the I2C interface timing characteristics     address. When bit-7 is set to 1 the target address is
     while Figure 23 and Figure 24 illustrate the I2C timing for    automatically incremented by one.
     both fast and standard modes, respectively. Please
     refer to Table 5 for the VIL, VIH, VOL, VOH definition to      For additional technical details about the I2C standard,
     define the rising and falling edge condition of the timing     such as pull-up resistor sizing the user is referred to
     symbols.                                                       “UM10204 I2C-bus specification and user manual,”
                                                                    published by NXP B.V.
     During the slave device selection phase, the I2C master
     supplies the 7-bit I2C slave device address to enable the
     QMI8658C. When SA0 is pulled down externally, the 7-
     bit device address becomes 0x6B (0b1101011). In case
     of a slave device ID conflict, SA0 may be used to
     change bit-0 of the device address. The 7-bit device
     address for the QMI8658C is 0x6A (0b1101010) if SA0
     is pulled up or left unconnected (internally there is a
     weak pull-up of 200K).
     Table 38. I2C Timing Characteristics

      Symbol                       Parameter                        Conditions           Min.       Typ.     Max.       Unit
         fSCL      SCL Clock Frequency                                                     0                 400        KHz
                   Bus-Free Time between STOP and
         tBUF                                                                            1300                             ns
                   START Conditions
       tHD;STA     START or Repeated START Hold Time                                      600                             ns
        tLOW       SCL LOW Period                                                        1300                             ns
        tHIGH      SCL HIGH Period                                                        600                             ns
       tSU;STA     Repeated START Setup Time                                              600                             ns
       tSU;DAT     Data Setup Time                                                        100                             ns
                                                               Standard Mode               0                 3450
       tHD;DAT     Data Hold Time                                                                                         ns
                                                               Fast Mode                   0                 900
                                                               Standard Mode                                 1000
       tRCL, tR    SCL Rise Time                                                                                          ns
                                                               Fast Mode                 20 + 0.1 * CB(14)   300
                                                               Standard Mode                                 300
         tFCL      SCL Fall Time                                                                                          ns
                                                               Fast Mode                 20 + 0.1 * CB(14)   300
                   SDA Rise Time.                              Standard Mode                                 1000
     tRDA, tRCL1   Rise Time of SCL after a Repeated                                                                      ns
                   START Condition and after ACK Bit           Fast Mode                 20 + 0.1 * CB(14)   300
                                                               Standard Mode                                 300
         tFDA      SDA Fall Time                                                                                          ns
                                                               Fast Mode                 20 + 0.1 * CB(14)   300
       tSU;STO     Stop Condition Setup Time                                              600                             ns
     Note:
     14. CB is the bus capacitance.




© 2022 QST Corporation                                        QMI8658C • Rev 0.9                                    www. qstcorp.com
                                                                                                                                   63
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                     QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
                                            Figure 23.      I2C Standard Mode Interface Timing




                                               Figure 24.     I2C Fast Mode Interface Timing




       12.3 MIPI I3C Interface
     The QMI8658C is compliant with the MIPI Alliance Specification for I3C, version 1.0.




© 2022 QST Corporation                                       QMI8658C • Rev 0.9                  www. qstcorp.com
                                                                                                                64
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                         QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       13 Package and Handling
       13.1 Package Drawing




                               Figure 25.   14 Pin LGA 2.5 x 3.0 x 0.86 mm Package




© 2022 QST Corporation                         QMI8658C • Rev 0.9                    www. qstcorp.com
                                                                                                    65
          ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       13.2 Reflow Specification




                         Note:
                         15. Figure from JEDEC J-STD-020



                                          Profile Feature                    Pb-Free Assembly Profile
                                     Temperature Min. (Tsmin)                            150°C
                                    Temperature Max. (Tsmax)                             200°C
                                   Time (tS) from (Tsmin to Tsmax)                   60-120 seconds
                                     Ramp-up Rate (TL to TP)                     3°C/second max.
                                   Liquidous Temperature (TL)                            217°C
                                  Time (tL) Maintained above (TL)                    60-150 seconds
                               Peak Body Package Temperature (TP)               260°C +0°C / -5°C
                                   Time (tP) within 5°C of 260°C                      30 seconds
                                   Ramp-down Rate (TP to TL)                     6°C/second max.
                                 Time 25°C to Peak Temperature                       8 minutes max.



                                                            Figure 26.    Reflow Profile

       13.3 Storage Specifications
     QMI8658C storage specification conforms to IPC/JEDEC J-STD-020D.01 Moisture Sensitivity Level (MSL) 3.
     Floor life after opening the moisture-sealed bag is 168 hours with storage conditions: Temperature: ambient to ≤30°C
     and Relative Humidity: 60%RH.




© 2022 QST Corporation                                          QMI8658C • Rev 0.9                             www. qstcorp.com
                                                                                                                              66
            ADVANCE INFORMATION — CONFIDENTIAL AND PROPRIETARY — DO NOT DISTRIBUTE




                                                                                                                                   QMI8658C — 6D Inertial Measurement Unit with Motion Co-Processor
       14 Document Information
       14.1 Revision History

      Revision           Revision Date     Description
      0.4                April 22, 2020    Initial release of Advance Information datasheet

      0.5                July 7, 2020      Updated CAL Register Addresses, CTRL9 Commands and Descriptions,
                                           Current Consumption, Accelerometer and Gyroscope Filter Characteristics,
                                           Low Power Mode ODR, Wake on Motion, Magnetometer Sensors supported

      0.6                Jan 13, 2021      Updated SPI description and diagrams, SPI modes, product performance
                                           specifications, and register map and descriptions

      0.7                17 May, 2021      Updated the pin name and function name map, typical SPI connections, soft
                                           reset, Self Test, On-Demand Calibration, I2C timing parameter table,
                                           ADDR_AI, BE, VDDIO rising limitation, recommended I2C pull-up resistance

      0.8                10 Sep, 2021      Added the maximum limitation of VIH, updated FIFO read command and
                                           sequence, updated ODR & filter bandwidth configurations, updated CTRL2,
                                           CTRL3, CTRL4, CTRL5 descriptions, deleted descriptions of magnetometer,
                                           updated Electro-Mechanical Specifications, updated the internal block
                                           diagram & interface operating modes, deleted the specifications, registers,
                                           and application diagrams that relative to I2CM interface, updated the
                                           Features, Descriptions & Applications, updated the marking information,
                                           updated the disabling of the internal pull-up resistors in IOs,

      0.9                10 Jan, 2022      updated the INT1/INT2 enable bit in CTRL1, updated Wake on Motion, added
                                           locking mechanism




     Attitude Engine™, Gen 2 AttitudeEngine™, and XKF3™ are trademarks of Fairchild Semiconductor licensed by ON
     Semiconductor to QST Corporation.




© 2022 QST Corporation                                  QMI8658C • Rev 0.9                                     www. qstcorp.com
                                                                                                                              67
